import{r as p,j as e,m as y,a0 as q,a1 as A,A as S,a2 as U,d as R}from"./index-D3qpkmvJ.js";import{A as F}from"./index-5xPmm2RN.js";const M=({isOpen:j,onClose:v,onSubmit:N,event:r=null,isEditing:m=!1})=>{const[a,u]=p.useState({title:"",description:"",type:"event",category:"general",date:"",time:"",location:{venue:"",address:"",city:"",state:""},instructor:"",price:0,maxParticipants:"",imageUrl:"",registrationRequired:!1,registrationLink:"",contactEmail:"",contactPhone:""}),[h,x]=p.useState(null),[s,f]=p.useState({});p.useEffect(()=>{var t,i,o,c;m&&r?(u({title:r.title||"",description:r.description||"",type:r.type||"event",category:r.category||"general",date:r.date?(()=>{try{const d=new Date(r.date);if(!isNaN(d.getTime())){const l=d.toISOString();return l?l.split("T")[0]:""}return""}catch{return console.warn("Invalid date format for event:",r.date),""}})():"",time:r.time||"",location:{venue:((t=r.location)==null?void 0:t.venue)||"",address:((i=r.location)==null?void 0:i.address)||"",city:((o=r.location)==null?void 0:o.city)||"",state:((c=r.location)==null?void 0:c.state)||""},instructor:r.instructor||"",price:r.price||0,maxParticipants:r.maxParticipants||"",imageUrl:r.imageUrl||"",registrationRequired:r.registrationRequired||!1,registrationLink:r.registrationLink||"",contactEmail:r.contactEmail||"",contactPhone:r.contactPhone||""}),r.imageUrl&&x(r.imageUrl)):m||(u({title:"",description:"",type:"event",category:"general",date:"",time:"",location:{venue:"",address:"",city:"",state:""},instructor:"",price:0,maxParticipants:"",imageUrl:"",registrationRequired:!1,registrationLink:"",contactEmail:"",contactPhone:""}),x(null))},[m,r]);const w=["workshop","event","exhibition","performance"],k=["music","dance","art","crafts","general"],n=t=>{const{name:i,value:o,type:c,checked:d}=t.target;if(i.includes(".")){const[l,D]=i.split(".");u(b=>({...b,[l]:{...b[l],[D]:c==="checkbox"?d:o}}))}else u(l=>({...l,[i]:c==="checkbox"?d:o}));s[i]&&f(l=>({...l,[i]:""}))},C=t=>{const i=t.target.files[0];if(i){const o=new FileReader;o.onload=c=>{x(c.target.result),u(d=>({...d,imageUrl:c.target.result}))},o.readAsDataURL(i)}},P=()=>{const t={};if(a.title.trim()?a.title.length>200&&(t.title="Event name must be 200 characters or less"):t.title="Event name is required",a.description.trim()?a.description.length>1e3&&(t.description="Description must be 1000 characters or less"):t.description="Description is required",!a.date)t.date="Date is required";else if(!m){const i=new Date(a.date),o=new Date;o.setHours(0,0,0,0),i<o&&(t.date="Event date must be today or in the future")}return a.time.trim()||(t.time="Time is required"),a.location.venue.trim()||(t["location.venue"]="Venue is required"),a.location.address.trim()||(t["location.address"]="Address is required"),a.location.city.trim()||(t["location.city"]="City is required"),a.location.state.trim()||(t["location.state"]="State is required"),a.price<0&&(t.price="Price cannot be negative"),a.maxParticipants&&a.maxParticipants<1&&(t.maxParticipants="Maximum participants must be at least 1"),a.contactEmail&&!/\S+@\S+\.\S+/.test(a.contactEmail)&&(t.contactEmail="Please provide a valid email address"),f(t),Object.keys(t).length===0},E=t=>{if(t.preventDefault(),P()){const i={...a,artist:"60d5ecb74c9b930015a5b2e1"};N(i),g()}},g=()=>{u({title:"",description:"",type:"event",category:"general",date:"",time:"",location:{venue:"",address:"",city:"",state:""},instructor:"",price:0,maxParticipants:"",imageUrl:"",registrationRequired:!1,contactEmail:"",contactPhone:""}),x(null),f({}),v()};return e.jsx(F,{children:j&&e.jsx(y.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:g,children:e.jsxs(y.div,{className:"bg-gradient-to-br from-[#F8E6DA]/95 to-[#F4C8C3]/95 backdrop-blur-lg rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto border border-[#e05264]/20",initial:{scale:.8,opacity:0,y:50},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:50},transition:{duration:.3},onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#d4a574]/20 bg-gradient-to-r from-[#134856] to-[#e05264] rounded-t-2xl",children:[e.jsx("h2",{className:"text-2xl font-bold text-white font-dm-serif",children:m?"Edit Event":"Add New Event"}),e.jsx("button",{onClick:g,className:"text-white hover:text-gray-200 transition-colors p-2 hover:bg-white/10 rounded-full",children:e.jsx(q,{size:20})})]}),e.jsxs("form",{onSubmit:E,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Image (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:C,className:"hidden",id:"image-upload"}),e.jsx("label",{htmlFor:"image-upload",className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-orange-400 transition-colors",children:h?e.jsx("img",{src:h,alt:"Preview",className:"w-full h-full object-cover rounded-lg"}):e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(A,{className:"w-8 h-8 mb-3 text-gray-400"}),e.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[e.jsx("span",{className:"font-semibold",children:"Click to upload"})," event image"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Event Name * ",e.jsxs("span",{className:"text-xs text-gray-500",children:["(",a.title.length,"/200)"]})]}),e.jsx("input",{type:"text",name:"title",value:a.title,onChange:n,placeholder:"Enter event name...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-teal-800",maxLength:"200"}),s.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Instructor/Artist (Optional)"}),e.jsx("input",{type:"text",name:"instructor",value:a.instructor,onChange:n,placeholder:"Name of instructor or artist...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-teal-800"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Description * ",e.jsxs("span",{className:"text-xs text-gray-500",children:["(",a.description.length,"/1000)"]})]}),e.jsx("textarea",{name:"description",value:a.description,onChange:n,placeholder:"Describe your event...",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none text-teal-800",maxLength:"1000"}),s.description&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Type *"}),e.jsx("select",{name:"type",value:a.type,onChange:n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-teal-800",children:w.map(t=>e.jsx("option",{value:t,children:t.charAt(0).toUpperCase()+t.slice(1)},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),e.jsx("select",{name:"category",value:a.category,onChange:n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-teal-800",children:k.map(t=>e.jsx("option",{value:t,children:t.charAt(0).toUpperCase()+t.slice(1)},t))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(S,{className:"mr-2"}),"Event Date *"]}),e.jsx("input",{type:"date",name:"date",value:a.date,onChange:n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-teal-800"}),s.date&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.date})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(U,{className:"mr-2"}),"Time *"]}),e.jsx("input",{type:"text",name:"time",value:a.time,onChange:n,placeholder:"e.g., 10:00 AM, 7:30 PM",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-teal-800"}),s.time&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.time})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(R,{className:"mr-2"}),"Location *"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",name:"location.venue",value:a.location.venue,onChange:n,placeholder:"Venue name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-teal-800"}),s["location.venue"]&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s["location.venue"]})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",name:"location.address",value:a.location.address,onChange:n,placeholder:"Street address",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-teal-800"}),s["location.address"]&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s["location.address"]})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",name:"location.city",value:a.location.city,onChange:n,placeholder:"City",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-teal-800"}),s["location.city"]&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s["location.city"]})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",name:"location.state",value:a.location.state,onChange:n,placeholder:"State",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-teal-800"}),s["location.state"]&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s["location.state"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price (â‚¹)"}),e.jsx("input",{type:"number",name:"price",value:a.price,onChange:n,min:"0",placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-teal-800"}),s.price&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.price})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Participants (Optional)"}),e.jsx("input",{type:"number",name:"maxParticipants",value:a.maxParticipants,onChange:n,min:"1",placeholder:"Unlimited",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-teal-800"}),s.maxParticipants&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.maxParticipants})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"registrationRequired",checked:a.registrationRequired,onChange:n,className:"mr-2 h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Registration Required"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Registration/Event Link (Optional)"}),e.jsx("input",{type:"url",name:"registrationLink",value:a.registrationLink,onChange:n,placeholder:"https://example.com/register or https://eventbrite.com/...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-teal-800"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Add a link for registration, tickets, or more information about the event"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Email (Optional)"}),e.jsx("input",{type:"email",name:"contactEmail",value:a.contactEmail,onChange:n,placeholder:"contact@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-teal-800"}),s.contactEmail&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.contactEmail})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Phone (Optional)"}),e.jsx("input",{type:"tel",name:"contactPhone",value:a.contactPhone,onChange:n,placeholder:"+91 98765 43210",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-teal-800"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:g,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 bg-gradient-to-r from-[#9b2226] to-[#d62d20] text-white px-4 py-2 rounded-lg font-semibold hover:from-[#7a1b1e] hover:to-[#b8251c] transition-all duration-300 shadow-lg hover:shadow-xl",children:m?"Update Event":"Add Event"})]})]})]})})})};export{M as E};
