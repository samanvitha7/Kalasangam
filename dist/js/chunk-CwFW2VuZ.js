import{j as e,A as t,m as r}from"./chunk-DaRttSCz.js";import{r as a}from"./chunk-CMRBzt0a.js";import{v as n,w as o,q as l,x as i,b as s}from"./index-uUFKMaW1.js";const c=({isOpen:c,onClose:d,onSubmit:m,event:u=null,isEditing:g=!1})=>{const[p,x]=a.useState({title:"",description:"",type:"event",category:"general",date:"",time:"",location:{venue:"",address:"",city:"",state:""},instructor:"",price:0,maxParticipants:"",imageUrl:"",registrationRequired:!1,registrationLink:"",contactEmail:"",contactPhone:""}),[b,h]=a.useState(null),[f,y]=a.useState({});a.useEffect(()=>{var e,t,r,a;g&&u?(x({title:u.title||"",description:u.description||"",type:u.type||"event",category:u.category||"general",date:u.date?(()=>{try{const e=new Date(u.date);if(!isNaN(e.getTime())){const t=e.toISOString();return t?t.split("T")[0]:""}return""}catch(e){return""}})():"",time:u.time||"",location:{venue:(null==(e=u.location)?void 0:e.venue)||"",address:(null==(t=u.location)?void 0:t.address)||"",city:(null==(r=u.location)?void 0:r.city)||"",state:(null==(a=u.location)?void 0:a.state)||""},instructor:u.instructor||"",price:u.price||0,maxParticipants:u.maxParticipants||"",imageUrl:u.imageUrl||"",registrationRequired:u.registrationRequired||!1,registrationLink:u.registrationLink||"",contactEmail:u.contactEmail||"",contactPhone:u.contactPhone||""}),u.imageUrl&&h(u.imageUrl)):g||(x({title:"",description:"",type:"event",category:"general",date:"",time:"",location:{venue:"",address:"",city:"",state:""},instructor:"",price:0,maxParticipants:"",imageUrl:"",registrationRequired:!1,registrationLink:"",contactEmail:"",contactPhone:""}),h(null))},[g,u]);const v=e=>{const{name:t,value:r,type:a,checked:n}=e.target;if(t.includes(".")){const[e,o]=t.split(".");x(t=>({...t,[e]:{...t[e],[o]:"checkbox"===a?n:r}}))}else x(e=>({...e,[t]:"checkbox"===a?n:r}));f[t]&&y(e=>({...e,[t]:""}))},N=()=>{x({title:"",description:"",type:"event",category:"general",date:"",time:"",location:{venue:"",address:"",city:"",state:""},instructor:"",price:0,maxParticipants:"",imageUrl:"",registrationRequired:!1,contactEmail:"",contactPhone:""}),h(null),y({}),d()};return e.jsx(t,{children:c&&e.jsx(r.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:N,children:e.jsxs(r.div,{className:"bg-gradient-to-br from-[#F8E6DA]/95 to-[#F4C8C3]/95 backdrop-blur-lg rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto border border-[#e05264]/20",initial:{scale:.8,opacity:0,y:50},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:50},transition:{duration:.3},onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#d4a574]/20 bg-gradient-to-r from-[#134856] to-[#e05264] rounded-t-2xl",children:[e.jsx("h2",{className:"text-2xl font-bold text-white font-dm-serif",children:g?"Edit Event":"Add New Event"}),e.jsx("button",{onClick:N,className:"text-white hover:text-gray-200 transition-colors p-2 hover:bg-white/10 rounded-full",children:e.jsx(n,{size:20})})]}),e.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),(()=>{const e={};if(p.title.trim()?p.title.length>200&&(e.title="Event name must be 200 characters or less"):e.title="Event name is required",p.description.trim()?p.description.length>1e3&&(e.description="Description must be 1000 characters or less"):e.description="Description is required",p.date){if(!g){const t=new Date(p.date),r=new Date;r.setHours(0,0,0,0),r>t&&(e.date="Event date must be today or in the future")}}else e.date="Date is required";return p.time.trim()||(e.time="Time is required"),p.location.venue.trim()||(e["location.venue"]="Venue is required"),p.location.address.trim()||(e["location.address"]="Address is required"),p.location.city.trim()||(e["location.city"]="City is required"),p.location.state.trim()||(e["location.state"]="State is required"),0>p.price&&(e.price="Price cannot be negative"),p.maxParticipants&&1>p.maxParticipants&&(e.maxParticipants="Maximum participants must be at least 1"),p.contactEmail&&!/\S+@\S+\.\S+/.test(p.contactEmail)&&(e.contactEmail="Please provide a valid email address"),y(e),0===Object.keys(e).length})()){const e={...p,artist:"60d5ecb74c9b930015a5b2e1"};m(e),N()}},className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Image (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{h(e.target.result),x(t=>({...t,imageUrl:e.target.result}))},e.readAsDataURL(t)}},className:"hidden",id:"image-upload"}),e.jsx("label",{htmlFor:"image-upload",className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-orange-400 transition-colors",children:b?e.jsx("img",{src:b,alt:"Preview",className:"w-full h-full object-cover rounded-lg"}):e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(o,{className:"w-8 h-8 mb-3 text-gray-400"}),e.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[e.jsx("span",{className:"font-semibold",children:"Click to upload"})," event image"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Event Name * ",e.jsxs("span",{className:"text-xs text-gray-500",children:["(",p.title.length,"/200)"]})]}),e.jsx("input",{type:"text",name:"title",value:p.title,onChange:v,placeholder:"Enter event name...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-teal-800",maxLength:"200"}),f.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Instructor/Artist (Optional)"}),e.jsx("input",{type:"text",name:"instructor",value:p.instructor,onChange:v,placeholder:"Name of instructor or artist...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-teal-800"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Description * ",e.jsxs("span",{className:"text-xs text-gray-500",children:["(",p.description.length,"/1000)"]})]}),e.jsx("textarea",{name:"description",value:p.description,onChange:v,placeholder:"Describe your event...",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none text-teal-800",maxLength:"1000"}),f.description&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Type *"}),e.jsx("select",{name:"type",value:p.type,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-teal-800",children:["workshop","event","exhibition","performance"].map(t=>e.jsx("option",{value:t,children:t.charAt(0).toUpperCase()+t.slice(1)},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),e.jsx("select",{name:"category",value:p.category,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-teal-800",children:["music","dance","art","crafts","general"].map(t=>e.jsx("option",{value:t,children:t.charAt(0).toUpperCase()+t.slice(1)},t))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(l,{className:"mr-2"}),"Event Date *"]}),e.jsx("input",{type:"date",name:"date",value:p.date,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-teal-800"}),f.date&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.date})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(i,{className:"mr-2"}),"Time *"]}),e.jsx("input",{type:"text",name:"time",value:p.time,onChange:v,placeholder:"e.g., 10:00 AM, 7:30 PM",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-teal-800"}),f.time&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.time})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(s,{className:"mr-2"}),"Location *"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",name:"location.venue",value:p.location.venue,onChange:v,placeholder:"Venue name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-teal-800"}),f["location.venue"]&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:f["location.venue"]})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",name:"location.address",value:p.location.address,onChange:v,placeholder:"Street address",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-teal-800"}),f["location.address"]&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:f["location.address"]})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",name:"location.city",value:p.location.city,onChange:v,placeholder:"City",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-teal-800"}),f["location.city"]&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:f["location.city"]})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",name:"location.state",value:p.location.state,onChange:v,placeholder:"State",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-teal-800"}),f["location.state"]&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:f["location.state"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price (â‚¹)"}),e.jsx("input",{type:"number",name:"price",value:p.price,onChange:v,min:"0",placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-teal-800"}),f.price&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.price})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Participants (Optional)"}),e.jsx("input",{type:"number",name:"maxParticipants",value:p.maxParticipants,onChange:v,min:"1",placeholder:"Unlimited",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-teal-800"}),f.maxParticipants&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.maxParticipants})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"registrationRequired",checked:p.registrationRequired,onChange:v,className:"mr-2 h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Registration Required"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Registration/Event Link (Optional)"}),e.jsx("input",{type:"url",name:"registrationLink",value:p.registrationLink,onChange:v,placeholder:"https://example.com/register or https://eventbrite.com/...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-teal-800"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Add a link for registration, tickets, or more information about the event"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Email (Optional)"}),e.jsx("input",{type:"email",name:"contactEmail",value:p.contactEmail,onChange:v,placeholder:"contact@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-teal-800"}),f.contactEmail&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.contactEmail})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Phone (Optional)"}),e.jsx("input",{type:"tel",name:"contactPhone",value:p.contactPhone,onChange:v,placeholder:"+91 98765 43210",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-teal-800"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:N,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 bg-gradient-to-r from-[#9b2226] to-[#d62d20] text-white px-4 py-2 rounded-lg font-semibold hover:from-[#7a1b1e] hover:to-[#b8251c] transition-all duration-300 shadow-lg hover:shadow-xl",children:g?"Update Event":"Add Event"})]})]})]})})})};export{c as E};
