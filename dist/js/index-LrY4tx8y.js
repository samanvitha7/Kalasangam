const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/ArtGallery-DTdZuZAz.js","js/chunk-DrBkpLm2.js","js/chunk-CMRBzt0a.js","js/chunk-ouJazw0A.js","js/chunk-C4w0ZaE1.js","js/chunk-B12jDwHr.js","js/chunk-Ca7r8q3n.js","js/chunk-D-ukXXUr.js","js/Home-CvrFGEEk.js","js/chunk-CumUmWms.js","js/chunk-Bt6U1h1N.js","assets/Home-BuM1dGoG.css","js/IndiaMapPage--S1baub8.js","js/About-D42oIb2O.js","js/chunk-BWoFSTeq.js","js/LoginPage-BAJ2PFs8.js","js/chunk-BorHaxuO.js","js/chunk-CPxFknmi.js","js/Signup-Dy2TfKBi.js","js/PhoneLogin-B1pBvTY_.js","js/PhoneSignup-CJbRe7Yq.js","js/TermsOfService-Dz9N9XZb.js","js/PrivacyPolicy-CShzyxoC.js","js/CommunityGuidelines-DZh8n1OP.js","js/UserPage-BN7ZK5s4.js","js/chunk-J4nWG5bO.js","js/chunk-i2nP3W7I.js","assets/ArtCard-r2S6UCa-.css","js/chunk-DwQVkG9p.js","js/ForgotPw-BQf8zPfw.js","js/ResetPassword-COqCq4ms.js","js/DanceGallery-B1Fwh_z3.js","js/MusicPage-DbCB_jp2.js","assets/MusicPage-_U6-sZs3.css","js/CraftsPage-BTQyxh81.js","js/EventsPage-Dr_fLZCC.js","assets/EventsPage-DDKpoaqD.css","js/ArtWall-DD1w9Yhv.js","js/ArtistsList-CiQKtABL.js","js/ArtistProfile-DL__rC7P.js","js/AdminLogin-DfAnmcP7.js","js/AdminPanel-DpdWBIYu.js","assets/AdminPanel-DcfI36zE.css","js/AdminDashboard-QAOsddvU.js"])))=>i.map(i=>d[i]);
import{j as e,m as t}from"./chunk-DrBkpLm2.js";import{r as a,u as o,L as r,N as n,a as l,b as i,c as s,R as c,B as d}from"./chunk-CMRBzt0a.js";import{_ as u,R as h}from"./chunk-CPxFknmi.js";import{y as m,L as p}from"./chunk-BWoFSTeq.js";import{a as f}from"./chunk-C4w0ZaE1.js";import"./chunk-ouJazw0A.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const g=f.create({baseURL:"http://localhost:5050",timeout:1e4,headers:{"Content-Type":"application/json"}});g.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer "+t),e},e=>Promise.reject(e)),g.interceptors.response.use(e=>e,e=>{var t;return 401===(null==(t=e.response)?void 0:t.status)&&localStorage.removeItem("token"),Promise.reject(e)});const b=a.createContext(),x=()=>localStorage.getItem("token")||sessionStorage.getItem("token"),v=(e,t=!0)=>{t?(localStorage.setItem("token",e),sessionStorage.removeItem("token")):(sessionStorage.setItem("token",e),localStorage.removeItem("token"))},y=()=>{localStorage.removeItem("token"),sessionStorage.removeItem("token")},w={user:null,token:x(),isAuthenticated:!1,loading:!0,error:null},_=(e,t)=>{switch(t.type){case"USER_LOADED":return{...e,isAuthenticated:!0,loading:!1,user:t.payload,error:null};case"REGISTER_SUCCESS":case"LOGIN_SUCCESS":return{...e,token:t.payload.token,user:t.payload.user,isAuthenticated:!0,loading:!1,error:null};case"REGISTER_FAIL":case"LOGIN_FAIL":case"AUTH_ERROR":return y(),{...e,token:null,user:null,isAuthenticated:!1,loading:!1,error:t.payload};case"LOGOUT":return y(),{...e,token:null,user:null,isAuthenticated:!1,loading:!1,error:null};case"CLEAR_ERROR":return{...e,error:null};case"SET_LOADING":return{...e,loading:t.payload};default:return e}},N=({children:t})=>{const[o,r]=a.useReducer(_,w),n=e=>{e?f.defaults.headers.common.Authorization="Bearer "+e:delete f.defaults.headers.common.Authorization},l=async()=>{var e,t,a;const o=x();if(o){n(o);try{const e=await g.get("/api/auth/me");r({type:"USER_LOADED",payload:e.data.user})}catch(l){401===(null==(e=l.response)?void 0:e.status)&&(y(),n(null)),r({type:"AUTH_ERROR",payload:(null==(a=null==(t=l.response)?void 0:t.data)?void 0:a.message)||"Authentication failed"})}}else r({type:"AUTH_ERROR",payload:"No token found"})};return a.useEffect(()=>{l()},[]),e.jsx(b.Provider,{value:{...o,register:async(e,t=!0)=>{var a,o;r({type:"SET_LOADING",payload:!0});try{const a=await g.post("/api/auth/register",e),{token:o,user:l}=a.data;return v(o,t),r({type:"REGISTER_SUCCESS",payload:{token:o,user:l}}),n(o),{success:!0,data:a.data}}catch(l){const e=(null==(o=null==(a=l.response)?void 0:a.data)?void 0:o.message)||"Registration failed";return r({type:"REGISTER_FAIL",payload:e}),{success:!1,error:e}}},registerWithPhone:async e=>{var t,a;r({type:"SET_LOADING",payload:!0});try{const t=await g.post("/api/auth/register-phone",e);return r({type:"REGISTER_SUCCESS",payload:t.data}),n(t.data.token),{success:!0,data:t.data}}catch(o){const e=(null==(a=null==(t=o.response)?void 0:t.data)?void 0:a.message)||"Registration failed";return r({type:"REGISTER_FAIL",payload:e}),{success:!1,error:e}}},login:async(e,t=!0)=>{var a,o;r({type:"SET_LOADING",payload:!0});try{const a=await g.post("/api/auth/login",e);return v(a.data.token,t),r({type:"LOGIN_SUCCESS",payload:a.data}),n(a.data.token),{success:!0,data:a.data}}catch(l){const e=(null==(o=null==(a=l.response)?void 0:a.data)?void 0:o.message)||"Login failed";return r({type:"LOGIN_FAIL",payload:e}),{success:!1,error:e}}},loginWithPhone:async e=>{var t,a;r({type:"SET_LOADING",payload:!0});try{const t=await g.post("/api/auth/login-phone",e);return r({type:"LOGIN_SUCCESS",payload:t.data}),n(t.data.token),{success:!0,data:t.data}}catch(o){const e=(null==(a=null==(t=o.response)?void 0:t.data)?void 0:a.message)||"Login failed";return r({type:"LOGIN_FAIL",payload:e}),{success:!1,error:e}}},logout:async()=>{try{await g.post("/api/auth/logout")}catch(e){}r({type:"LOGOUT"}),n(null)},forgotPassword:async e=>{var t,a;try{return{success:!0,message:(await g.post("/api/auth/forgot-password",{email:e})).data.message}}catch(o){return{success:!1,error:(null==(a=null==(t=o.response)?void 0:t.data)?void 0:a.message)||"Failed to send reset email"}}},resetPassword:async(e,t)=>{var a,o;try{const a=await g.put("/api/auth/reset-password/"+e,{password:t});return r({type:"LOGIN_SUCCESS",payload:a.data}),n(a.data.token),{success:!0,data:a.data}}catch(l){return{success:!1,error:(null==(o=null==(a=l.response)?void 0:a.data)?void 0:o.message)||"Password reset failed"}}},verifyEmail:async e=>{var t,a;try{return{success:!0,message:(await g.get("/api/auth/verify-email/"+e)).data.message}}catch(o){return{success:!1,error:(null==(a=null==(t=o.response)?void 0:t.data)?void 0:a.message)||"Email verification failed"}}},resendVerificationEmail:async e=>{var t,a;try{return{success:!0,message:(await g.post("/api/auth/resend-verification",{email:e})).data.message}}catch(o){return{success:!1,error:(null==(a=null==(t=o.response)?void 0:t.data)?void 0:a.message)||"Failed to resend verification email"}}},clearError:()=>{r({type:"CLEAR_ERROR"})},loadUser:l},children:t})},E=()=>{const e=a.useContext(b);if(!e)throw Error("useAuth must be used within an AuthProvider");return e};function k({scrolled:t,onMapClick:n}){var l,i;const[s,c]=a.useState(!1),[d,u]=a.useState(!1),h=a.useRef(),p=a.useRef(),f=o(),{user:g,logout:b,isAuthenticated:x}=E();return a.useEffect(()=>{function e(e){h.current&&!h.current.contains(e.target)&&c(!1),p.current&&!p.current.contains(e.target)&&u(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),e.jsx("header",{className:`\n    fixed top-0 left-1/2 -translate-x-1/2 w-full z-50\n    transition-all duration-500 ease-in-out font-lora\n    ${t?"bg-blush-peach/95 backdrop-blur-md rounded-full shadow-2xl px-6 border border-vermilion/20":"bg-transparent px-6 flex justify-between items-center"}\n    h-16\n  `,style:{width:t?"97vw":"100vw"},children:e.jsxs("div",{className:"flex items-center justify-between h-full w-full",children:[e.jsx("div",{className:"flex-shrink-0 flex items-center",children:e.jsx(r,{to:"/home",className:"no-underline block",children:e.jsx("img",{src:"/assets/logo-header.png",alt:"KalaSangam Logo",className:`\n        transition-all duration-500 ease-in-out\n        ${t?"h-20 scale-125":"h-24 scale-150"}\n        hover:scale-[1.7]"\n      `})})}),e.jsxs("nav",{className:"flex space-x-12 text-[1.35rem] font-bold tracking-wide transition-colors duration-500 ease-in-out\n              text-deep-teal",children:[e.jsx(r,{to:"/gallery",className:"font-winky font-[500] transition-all duration-300 ease-in-out hover:text-rosehover",children:"Art Gallery"}),e.jsx(r,{to:"/art-wall",className:"font-winky font-[500] transition-all duration-300 ease-in-out hover:text-rosehover",children:"Art Wall"}),e.jsx(r,{to:"/artists",className:"font-winky font-[500] transition-all duration-300 ease-in-out hover:text-rosehover",children:"Artists"}),e.jsxs("div",{className:"relative flex items-center",ref:h,children:[e.jsxs("span",{className:"\n      font-winky font-[500] text-deep-teal cursor-pointer flex items-center\n      transition-all duration-300 ease-in-out\n      hover:text-rosehover\n    ",onClick:()=>c(!s),children:["Explore",e.jsx("svg",{className:"w-4 h-4 ml-1 transition-transform duration-200 "+(s?"rotate-90":"rotate-0"),fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]}),s&&e.jsx("ul",{className:`\n        absolute top-full mt-2 z-50 w-52 rounded-xl shadow-lg font-winky text-[1.1rem] font-[500] tracking-wide\n        ${t?"bg-deep-teal text-blush-peach border border-coral-red/20":"bg-blush-peach text-deep-teal border border-deep-teal/10"}\n      `,children:[{label:"Explore by State",key:"state"},{label:"Explore Art",key:"art"},{label:"Explore Dance",key:"dance"},{label:"Explore Music",key:"music"},{label:"Explore Crafts",key:"crafts"}].map(a=>e.jsx("li",{className:`\n            px-4 py-2 cursor-pointer transition-all duration-200\n            ${t?"hover:bg-coral-red/20 hover:text-saffronglow":"hover:text-vermilion"}\n          `,onClick:()=>(e=>{switch(c(!1),e){case"state":f("/explore/state");break;case"art":f("/explore/art?category=art");break;case"dance":f("/explore/dance?category=dance");break;case"music":f("/explore/music?category=music");break;case"crafts":f("/explore/crafts?category=craft")}})(a.key),children:a.label},a.key))})]}),e.jsx(r,{to:"/map",className:"font-winky font-[500] transition-all duration-300 ease-in-out hover:text-rosehover",onClick:n,children:"India Map"}),e.jsx(r,{to:"/events",className:"font-winky font-[500] transition-all duration-300 ease-in-out hover:text-rosehover",children:"Events"}),e.jsx(r,{to:"/about",className:"font-winky font-[500] transition-all duration-300 ease-in-out hover:text-rosehover",children:"About"})]}),e.jsx("div",{className:"flex-shrink-0 flex items-center space-x-4",children:x?e.jsxs(e.Fragment,{children:["Admin"===(null==g?void 0:g.role)&&e.jsx(r,{to:"/admin",className:"px-4 py-2 rounded-xl font-[550] font-winky text-[1rem] transition-all duration-300 bg-gradient-to-r from-coral-red to-saffronglow text-white hover:from-saffronglow hover:to-coral-red",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:"âš¡"}),e.jsx("span",{children:"Admin Panel"})]})}),e.jsxs("div",{className:"relative",ref:p,children:[e.jsxs("button",{onClick:()=>u(!d),className:`group flex items-center space-x-2 px-4 py-2 rounded-xl font-[550] font-winky text-[1rem] transition-all duration-300 ${t?"bg-gradient-to-r from-deep-teal to-coral-red text-blush-peach hover:from-coral-red hover:to-saffronglow":"hover:bg-gradient-to-r from-deep-teal to-coral-red  "}\n                }`,children:[e.jsx("div",{className:"w-9 h-9 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx("span",{className:"text-base font-semibold transition-colors duration-300 "+(t?"text-blush-peach group-hover:text-white":"text-deep-teal group-hover:text-white"),children:(null==(i=null==(l=null==g?void 0:g.name)?void 0:l.charAt(0))?void 0:i.toUpperCase())||"?"})}),e.jsx("span",{className:"text-[1rem] font-[500] tracking-wide transition-colors duration-300 "+(t?"text-blush-peach group-hover:text-white":"text-deep-teal group-hover:text-white"),children:(null==g?void 0:g.name)||"Artist"}),e.jsx("span",{className:"text-xs text-deep-teal group-hover:text-white",children:"â–¾"})]}),d&&e.jsxs("ul",{className:"absolute right-0 top-full mt-2 z-50 w-56 rounded-xl shadow-xl font-winky text-[1rem] font-[500] tracking-wide "+(t?"bg-deep-teal text-white border border-coral-red/20":"bg-blush-peach text-deep-teal shadow-md border border-deep-teal/10"),children:[e.jsxs("li",{className:"px-4 py-3 border-b border-coral-red/10",children:[e.jsx("div",{className:"text-sm "+(t?"text-saffronglow":"text-vermilion"),children:"Signed in as"}),e.jsx("div",{className:"font-normal truncate "+(t?"text-blush-peach ":"text-deep-teal"),children:null==g?void 0:g.email})]}),e.jsx("li",{children:e.jsx(r,{to:"/profile",className:"block px-4 py-3 rounded-md transition-all duration-300 "+(t?"hover:bg-coral-red/20 text-blush-peach hover:text-saffronglow":"text-deep-teal hover:text-vermilion"),onClick:()=>u(!1),children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:"ðŸ‘¤"}),e.jsx("span",{children:"Profile"})]})})}),e.jsx("li",{children:e.jsx(r,{to:"/profile",className:"block px-4 py-3 rounded-md transition-all duration-300 "+(t?"hover:bg-coral-red/20 text-blush-peach hover:text-saffronglow":"text-deep-teal hover:text-vermilion"),onClick:()=>u(!1),children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:"ðŸŽ¨"}),e.jsx("span",{children:"My Artworks"})]})})}),e.jsx("li",{children:e.jsx(r,{to:"/profile",className:"block px-4 py-3 rounded-md transition-all duration-300 "+(t?"hover:bg-coral-red/20 text-blush-peach hover:text-saffronglow":"text-deep-teal hover:text-vermilion"),onClick:()=>u(!1),children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:"ðŸ“…"}),e.jsx("span",{children:"My Events"})]})})}),e.jsx("li",{children:e.jsx(r,{to:"/profile",className:"block px-4 py-3 rounded-md transition-all duration-300 "+(t?"hover:bg-coral-red/20 text-blush-peach hover:text-saffronglow":"text-deep-teal hover:text-vermilion"),onClick:()=>u(!1),children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:"â¤ï¸"}),e.jsx("span",{children:"Liked Posts"})]})})}),e.jsx("li",{className:"mx-4 my-2",children:e.jsx("div",{className:"h-px "+(t?"bg-coral-red/20":"bg-deep-teal/20")})}),e.jsx("li",{children:e.jsx(r,{to:"/profile",className:"block px-4 py-3 rounded-md transition-all duration-300 "+(t?"hover:bg-coral-red/20 text-blush-peach hover:text-saffronglow":"text-deep-teal hover:text-vermilion"),onClick:()=>u(!1),children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:"âš™ï¸"}),e.jsx("span",{children:"Settings"})]})})}),e.jsx("li",{children:e.jsx("button",{onClick:async()=>{u(!1);try{await b(),m.success("Logged out successfully!"),f("/home")}catch(e){m.error("Error logging out")}},className:"w-full text-left block px-4 py-3 rounded-md transition-all duration-300 "+(t?"hover:bg-coral-red/20 text-blush-peach hover:text-saffronglow":"text-deep-teal hover:text-vermilion"),children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:"ðŸšª"}),e.jsx("span",{children:"Logout"})]})})})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(r,{to:"/login",className:"px-5 py-2 rounded-lg font-bold transition-all duration-300 \n             bg-gradient-to-r from-deep-teal to-coral-red text-white\n             hover:from-coral-red hover:to-saffronglow",children:"Login"}),e.jsx(r,{to:"/signup",className:"px-5 py-2 rounded-lg font-bold transition-all duration-300 \n                  bg-gradient-to-r from-deep-teal to-coral-red text-white\n                  hover:from-coral-red hover:to-saffronglow",children:"Sign Up"})]})})]})})}function A(){return e.jsxs("footer",{className:"bg-gradient-to-r from-deep-teal to-coral-red text-white border-t border-coral-red/20 px-6 py-8 font-lora font-medium",children:[e.jsxs("div",{className:"max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold font-dm-serif-display mb-3 text-coral-red",children:"About KalaSangam"}),e.jsx("p",{className:" font-lora text-sm leading-relaxed",children:"KalaSangam is a digital tribute to India's rich heritage of traditional arts â€” from Madhubani and Warli to Kathakali and Pattachitra. We connect culture, creativity, and community across 29 states."})]}),e.jsxs("div",{className:"pl-5 md:pl-6",children:[e.jsx("h2",{className:"text-xl font-bold font-dm-serif-display mb-3 text-coral-red",children:"Explore"}),e.jsx("ul",{className:" font-lora text-sm space-y-1.5",children:[{to:"/",label:"Home"},{to:"/gallery",label:"Traditional Arts"},{to:"/art-wall",label:"Art Wall"},{to:"/map",label:"States"},{to:"/artists",label:"Artists"},{to:"/login",label:"Login"},{to:"/signup",label:"Sign Up"}].map(({to:t,label:a})=>e.jsx("li",{children:e.jsx(r,{to:t,className:"hover:underline hover:text-saffronglow transition-colors duration-200 font-semibold",children:a})},t))})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold  text-deep-teal font-dm-serif-display mb-3",children:"Get In Touch"}),e.jsx("p",{className:"text-sm mb-3",children:"We'd love to hear from artists, enthusiasts, and collaborators."}),e.jsxs("form",{className:"space-y-2",children:[e.jsx("input",{type:"email",placeholder:"Your email",id:"quick-email",className:"w-full px-3 py-2 font-lora border border-blush-peach/30 rounded bg-blush-peach/10 text-sm text-blush-peach placeholder-blush-peach/60 focus:outline-none focus:border-saffronglow focus:ring-1 focus:ring-saffronglow transition-all duration-200"}),e.jsx(r,{to:"",onClick:()=>{var e;const t=null==(e=document.getElementById("quick-email"))?void 0:e.value;t?window.location.href=`/about?email=${encodeURIComponent(t)}#contact`:alert("Please enter your email before submitting!")},className:"inline-block px-5 py-2 rounded font-[550] text-sm bg-blush-peach text-deep-teal \n                        hover:bg-deep-teal hover:text-blush-peach transition-all duration-300 shadow-md hover:shadow-lg",children:"Send"})]})]})]}),e.jsx("div",{className:"mt-6 pt-5 border-t border-blush-peach/20",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsx("div",{className:"text-xs  font-lora font-bold",children:"Â© 2025 KalaSangam. All rights reserved."}),e.jsx("div",{className:"flex font-lora flex-wrap gap-4 text-xs",children:[{to:"/terms-of-service",label:"Terms of Service"},{to:"/privacy-policy",label:"Privacy Policy"},{to:"/community-guidelines",label:"Community Guidelines"}].map(({to:t,label:a})=>e.jsx(r,{to:t,className:"hover:text-saffronglow hover:underline transition-colors duration-200 font-semibold",children:a},t))})]})})]})}const S=a.createContext(),R=()=>{const e=a.useContext(S);if(!e)throw Error("useSoundContext must be used within a SoundProvider");return e},L=({children:t})=>{const[o,r]=a.useState(!1),[n,l]=a.useState(!1),[i,s]=a.useState(.3),[c,d]=a.useState(Array(128).fill(0)),u=a.useRef(null),[h,m]=a.useState(!1),p=a.useRef(null),f=a.useRef(null),g=a.useRef(null),b=a.useRef(null),x=()=>{if(f.current&&g.current&&n)f.current.getByteFrequencyData(g.current),d(Array.from(g.current)),b.current=requestAnimationFrame(x);else if(n){const e=Array(128).fill(0).map(()=>100*Math.random()+50*Math.sin(.01*Date.now())+50);d(e),b.current=requestAnimationFrame(x)}};return a.useEffect(()=>(h||(u.current=new Audio("/sitar-loop.mp3"),u.current.loop=!0,u.current.volume=i,u.current.preload="auto",u.current.addEventListener("loadeddata",()=>{(()=>{try{if(!p.current&&u.current){p.current=new(window.AudioContext||window.webkitAudioContext),f.current=p.current.createAnalyser(),p.current.createMediaElementSource(u.current).connect(f.current),f.current.connect(p.current.destination),f.current.fftSize=256,f.current.smoothingTimeConstant=.8;const e=f.current.frequencyBinCount;g.current=new Uint8Array(e)}}catch(e){setInterval(()=>{if(n){const e=Array(128).fill(0).map(()=>100*Math.random()+50);d(e)}},100)}})(),m(!0)}),u.current.addEventListener("error",e=>{}),u.current.addEventListener("ended",()=>{l(!1)})),()=>{u.current&&(u.current.pause(),u.current.currentTime=0),b.current&&cancelAnimationFrame(b.current)}),[h]),a.useEffect(()=>{if(u.current&&h)if(o){u.current,u.current.currentTime=0;const e=u.current.play();void 0!==e&&e.then(()=>{l(!0),p.current&&"suspended"===p.current.state&&p.current.resume(),x()}).catch(e=>{l(!1)})}else u.current.pause(),u.current.currentTime=0,l(!1),b.current&&cancelAnimationFrame(b.current)},[o,h]),a.useEffect(()=>{u.current&&(u.current.volume=i)},[i]),e.jsx(S.Provider,{value:{soundEnabled:o,isPlaying:n,volume:i,audioData:c,toggleSound:()=>{r(!o)},enableSound:()=>{r(!0)},disableSound:()=>{r(!1)},forceStopAllAudio:()=>{document.querySelectorAll("audio").forEach(e=>{e.pause(),e.currentTime=0}),r(!1),l(!1),b.current&&cancelAnimationFrame(b.current)},changeVolume:e=>{s(e),u.current&&(u.current.volume=e)}},children:t})},C=({color:o,delay:r,duration:n})=>{const{initialX:l,initialY:i,size:s,driftDistance:c,horizontalDrift:d}=a.useMemo(()=>({initialX:Math.random()*window.innerWidth,initialY:Math.random()*window.innerHeight,size:1+2.5*Math.random(),driftDistance:40+60*Math.random(),horizontalDrift:40*Math.random()-20}),[]);return e.jsx(t.div,{className:"absolute rounded-full pointer-events-none",style:{backgroundColor:o,width:s+"px",height:s+"px",top:0,left:0},initial:{x:l,y:i,opacity:0,scale:0},animate:{y:i-c,x:l+d,opacity:[0,.3,.8,.6,0],scale:[0,.5,1,.8,0]},transition:{duration:n,delay:r,ease:"easeOut",repeat:1/0,repeatDelay:3*Math.random()+1}})};function P({onFinish:o}){const r=["#1E5E75","#E85A4F","#F6A100","#DA639B","#6D47A2"];return a.useEffect(()=>{const e=setTimeout(()=>{o()},3500);return()=>{clearTimeout(e)}},[o]),e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center overflow-hidden",style:{backgroundImage:"\n          linear-gradient(to bottom, \n            rgba(247, 252, 223, 0.45), \n            rgba(250, 192, 152, 0.45), \n            rgba(217, 90, 112, 0.45), \n            rgba(19, 72, 86, 0.45)),\n          url(/assets/logoremoved.png)\n        ",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[e.jsx("div",{className:"absolute inset-0 z-[2] pointer-events-none",children:Array.from({length:120},(t,a)=>e.jsx(C,{color:r[a%r.length],delay:.05*a,duration:3+2*Math.random()},a))}),e.jsx(t.div,{className:"relative flex items-center justify-center z-10",initial:{scale:.5,opacity:0},animate:{scale:1.8,opacity:1,y:0},transition:{duration:3.5,ease:"easeOut"},children:e.jsx(t.img,{src:"/assets/logo-splash.png",alt:"Logo",className:"relative max-w-[80vw] max-h-[80vh] object-contain",animate:{y:[0,-5,5]},transition:{duration:2.5,repeat:1/0,ease:"easeInOut"}})})]})}function I({onContinue:r}){const[n,l]=a.useState(!1),{enableSound:i,disableSound:s}=R(),c=o(),d=e=>{l(!0),e?i():s(),setTimeout(()=>{r(e),c("/home")},500)};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{backgroundImage:"\n          linear-gradient(to bottom, \n            rgba(247, 252, 223, 0.4), \n            rgba(250, 192, 152, 0.4), \n            rgba(217, 90, 112, 0.4), \n            rgba(19, 72, 86, 0.4)),\n          url(/assets/logoremoved.png)\n        ",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:e.jsx("div",{className:"text-center px-4 max-w-xl",children:e.jsxs(t.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:1},children:[e.jsx("h1",{className:"text-5xl md:text-7xl font-extrabold mb-6 font-lora text-coral-red",children:"Ready to Explore?"}),e.jsx("p",{className:"text-xl md:text-2xl mb-8 max-w-2xl mx-auto font-lora text-deep-charcoal",children:"Prepare for a world of rhythm, soul, and color."}),e.jsxs("div",{className:"space-y-4 md:space-x-4 md:space-y-0 md:flex md:justify-center",children:[e.jsx("button",{onClick:()=>d(!0),className:"px-8 py-4 rounded-full bg-deep-teal border-coral-red text-off-white hover:border-deep-teal hover:bg-coral-red transition-all font-bold font-lora text-lg shadow-lg",type:"button",children:"Continue with Sound"}),e.jsx("button",{onClick:()=>d(!1),className:"px-8 py-4 rounded-full bg-deep-teal border-coral-red text-off-white hover:border-deep-teal hover:bg-coral-red transition-all font-bold font-lora text-lg shadow-lg",type:"button",children:"Continue without Sound"})]})]})})})}function O({onContinue:t}){const[o,r]=a.useState("loading");return"loading"===o?e.jsx(P,{onFinish:()=>{r("prompt")}}):"prompt"===o?e.jsx(I,{onContinue:e=>{r("done"),t(e)}}):null}const T=({children:t,allowedRoles:a})=>{const o=localStorage.getItem("token"),r=localStorage.getItem("userRole");return o?a&&!a.includes(r)?e.jsxs("div",{className:"access-denied",children:[e.jsx("h2",{children:"Access Denied"}),e.jsx("p",{children:"You don't have permission to access this page."}),e.jsxs("p",{children:["Required role: ",a.join(" or ")]}),e.jsxs("p",{children:["Your role: ",r||"Not specified"]})]}):t:e.jsx(n,{to:"/admin/login",replace:!0})},D=a.createContext();function j({children:t}){const[o,r]=a.useState(!1),[n,l]=a.useState("initializing");return a.useEffect(()=>{let e;return(async()=>{try{l("checking-dom"),"loading"===document.readyState&&await new Promise(e=>{document.addEventListener("DOMContentLoaded",e,{once:!0})}),l("checking-styles");const e=()=>{const e=document.createElement("div");e.className="hidden opacity-0 transition-opacity duration-300 bg-warm-sand text-deep-teal font-lora",e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e);const t=window.getComputedStyle(e),a="none"===t.display,o="0"===t.opacity,r=t.transitionProperty.includes("opacity"),n="rgba(0, 0, 0, 0)"!==t.backgroundColor&&"transparent"!==t.backgroundColor,l="rgba(0, 0, 0, 0)"!==t.color&&"rgb(0, 0, 0)"!==t.color;return document.body.removeChild(e),a&&o&&r&&n&&l};let t=!1,a=0;const o=20;for(;!t&&o>a;)t=e(),t||(await new Promise(e=>setTimeout(e,100)),a++);l("checking-fonts"),document.fonts&&await document.fonts.ready,l("finalizing"),await new Promise(e=>setTimeout(e,200)),l("ready"),r(!0)}catch(e){l("ready"),r(!0)}})(),e=setTimeout(()=>{l("ready"),r(!0)},5e3),()=>{e&&clearTimeout(e)}},[]),e.jsx(D.Provider,{value:{isAppReady:o,loadingStage:n},children:t})}function V(){const{soundEnabled:t,isPlaying:o,volume:r,audioData:n,toggleSound:l,forceStopAllAudio:i,changeVolume:s}=R(),[c,d]=a.useState(!1),u=()=>{const t=n.slice(0,32);return e.jsx("div",{className:"flex items-end justify-center gap-1 h-12 w-32",children:t.map((t,a)=>{const r=Math.max(2,t/255*48);return e.jsx("div",{className:"bg-gradient-to-t from-deep-teal to-coral-red rounded-sm transition-all duration-100",style:{width:"2px",height:r+"px",opacity:o?1:.3,transform:`scaleY(${o?1:.3})`}},a)})})};return e.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col items-end gap-2",children:[c&&e.jsxs("div",{className:"bg-mist-blush/95 backdrop-blur-sm rounded-lg p-4 shadow-xl border border-coral-red/20 min-w-[200px]",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-xs font-medium text-deep-teal mb-2",children:"Audio Visualizer"}),e.jsx("div",{className:"bg-warm-sand rounded-lg p-2",children:e.jsx(u,{})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-xs font-medium text-deep-teal",children:"Volume"}),e.jsxs("span",{className:"text-xs text-deep-charcoal/70",children:[Math.round(100*r),"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:r,onChange:e=>{const t=parseFloat(e.target.value);e.preventDefault(),e.stopPropagation(),s(t)},className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #1E5E75 0%, #1E5E75 ${100*r}%, #e5e7eb ${100*r}%, #e5e7eb 100%)`}})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:i,className:"flex-1 px-3 py-2 bg-coral-red text-white text-xs rounded-md hover:bg-muted-fuchsia transition-colors",children:"Force Stop"}),e.jsx("button",{onClick:()=>s(.5),className:"flex-1 px-3 py-2 bg-deep-teal text-white text-xs rounded-md hover:bg-indigo-purple transition-colors",children:"Reset Volume"})]})]}),e.jsx("button",{onClick:l,onDoubleClick:()=>{i()},className:`\n          p-3 rounded-full shadow-lg transition-all duration-300\n          ${t?"bg-deep-teal hover:bg-coral-red text-white":"bg-deep-charcoal hover:bg-muted-fuchsia text-white"}\n          hover:scale-105 active:scale-95\n        `,title:t?"Turn off sound (double-click to force stop)":"Turn on sound",children:e.jsxs("div",{className:"relative w-6 h-6",children:[t&&o&&e.jsxs("div",{className:"absolute inset-0 animate-pulse",children:[e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-8 h-8 rounded-full border-2 border-white/30 animate-ping"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-6 h-6 rounded-full border-2 border-white/50 animate-ping",style:{animationDelay:"0.3s"}})]}),e.jsx("svg",{className:"w-full h-full",fill:"currentColor",viewBox:"0 0 24 24",children:t?e.jsx("path",{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"}):e.jsx("path",{d:"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"})})]})}),e.jsx("button",{onClick:()=>d(!c),className:`\n          px-3 py-1 rounded-full text-xs font-medium transition-all duration-300\n          ${c?"bg-deep-teal text-white":t?"bg-saffron-mist text-coral-red hover:bg-golden-saffron":"bg-mist-blush text-deep-charcoal hover:bg-warm-sand"}\n        `,children:c?"ðŸ”½ Controls":t?o?"ðŸŽµ Playing":"â¸ï¸ Ready":"ðŸ”‡ Off"})]})}const z=a.lazy(()=>u(()=>import("./ArtGallery-DTdZuZAz.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),M=a.lazy(()=>u(()=>import("./Home-CvrFGEEk.js"),__vite__mapDeps([8,1,2,3,9,10,11]))),G=a.lazy(()=>u(()=>import("./IndiaMapPage--S1baub8.js"),__vite__mapDeps([12,1,2,3,9,5]))),F=a.lazy(()=>u(()=>import("./About-D42oIb2O.js"),__vite__mapDeps([13,1,2,3,14,4,5]))),U=a.lazy(()=>u(()=>import("./LoginPage-BAJ2PFs8.js"),__vite__mapDeps([15,1,2,3,14,4,16,17]))),$=a.lazy(()=>u(()=>import("./Signup-Dy2TfKBi.js"),__vite__mapDeps([18,1,2,3,14,4,16,17]))),H=a.lazy(()=>u(()=>import("./PhoneLogin-B1pBvTY_.js"),__vite__mapDeps([19,1,2,3,14,4,16,17]))),W=a.lazy(()=>u(()=>import("./PhoneSignup-CJbRe7Yq.js"),__vite__mapDeps([20,1,2,3,14,4,16,17]))),B=a.lazy(()=>u(()=>import("./TermsOfService-Dz9N9XZb.js"),__vite__mapDeps([21,1,2,3]))),K=a.lazy(()=>u(()=>import("./PrivacyPolicy-CShzyxoC.js"),__vite__mapDeps([22,1,2,3]))),q=a.lazy(()=>u(()=>import("./CommunityGuidelines-DZh8n1OP.js"),__vite__mapDeps([23,1,2,3]))),Y=a.lazy(()=>u(()=>import("./UserPage-BN7ZK5s4.js"),__vite__mapDeps([24,1,2,3,14,4,25,6,7,26,10,27,28,5,17]))),X=a.lazy(()=>u(()=>import("./ForgotPw-BQf8zPfw.js"),__vite__mapDeps([29,1,2,3,14,4,16,17]))),J=a.lazy(()=>u(()=>import("./ResetPassword-COqCq4ms.js"),__vite__mapDeps([30,1,2,3,14,4]))),Q=a.lazy(()=>u(()=>import("./DanceGallery-B1Fwh_z3.js"),__vite__mapDeps([31,1,2,3,4]))),Z=a.lazy(()=>u(()=>import("./MusicPage-DbCB_jp2.js"),__vite__mapDeps([32,1,2,3,5,33]))),ee=a.lazy(()=>u(()=>import("./CraftsPage-BTQyxh81.js"),__vite__mapDeps([34,1,2,3,5,7]))),te=a.lazy(()=>u(()=>import("./EventsPage-Dr_fLZCC.js"),__vite__mapDeps([35,1,2,3,14,4,6,7,28,5,17,36]))),ae=a.lazy(()=>u(()=>import("./ArtWall-DD1w9Yhv.js"),__vite__mapDeps([37,1,2,3,14,4,25,6,7,26,10,27,5,17]))),oe=a.lazy(()=>u(()=>import("./ArtistsList-CiQKtABL.js"),__vite__mapDeps([38,1,2,3,26,6,7,10,5]))),re=a.lazy(()=>u(()=>import("./ArtistProfile-DL__rC7P.js"),__vite__mapDeps([39,1,2,3,6,7,26,10,14,4,17]))),ne=a.lazy(()=>u(()=>import("./AdminLogin-DfAnmcP7.js"),__vite__mapDeps([40,1,2,3,10])));a.lazy(()=>u(()=>import("./AdminPanel-DpdWBIYu.js"),__vite__mapDeps([41,1,2,3,10,42])));const le=a.lazy(()=>u(()=>import("./AdminDashboard-QAOsddvU.js"),__vite__mapDeps([43,1,2,3,41,10,42,5,6,7])));function ie(){const t=l(),r=o(),{disableSound:n}=R(),{isAppReady:c,loadingStage:d}=function(){const e=a.useContext(D);if(!e)throw Error("useAppReady must be used within AppReadyProvider");return e}();a.useEffect(()=>{"/"===t.pathname&&sessionStorage.getItem("splashShown")&&r("/home",{replace:!0})},[t.pathname,r]);const u=a.useRef(null),[h,m]=a.useState(!1);a.useEffect(()=>{const e=new IntersectionObserver(([e])=>{m(!e.isIntersecting)},{root:null,threshold:0}),t=u.current;return t&&e.observe(t),()=>{t&&e.unobserve(t)}},[h]);const f=e=>{r("/gallery?state="+encodeURIComponent(e))};return a.useEffect(()=>{"/"!==t.pathname&&"/home"!==t.pathname&&n()},[t.pathname,n]),e.jsxs("div",{className:"app-container relative",children:[e.jsxs("div",{className:"content-wrapper relative",children:[e.jsx(k,{scrolled:h,onMapClick:()=>{r("/map")}}),e.jsx("div",{ref:u,className:"h-[1px] w-full"}),e.jsxs("main",{className:"page-content "+(c?"":"loading"),children:[e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-warm-sand",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-deep-teal mx-auto mb-4"}),e.jsx("div",{className:"text-lg text-deep-charcoal font-lora",children:"Loading..."})]})}),children:e.jsxs(i,{children:[e.jsx(s,{path:"/",element:e.jsx(M,{})}),e.jsx(s,{path:"/home",element:e.jsx(M,{})}),e.jsx(s,{path:"/map",element:e.jsx(G,{onStateClick:f})}),e.jsx(s,{path:"/gallery",element:e.jsx(z,{})}),e.jsx(s,{path:"/art-wall",element:e.jsx(ae,{})}),e.jsx(s,{path:"/artists",element:e.jsx(oe,{})}),e.jsx(s,{path:"/artist/:artistId",element:e.jsx(re,{})}),e.jsx(s,{path:"/about",element:e.jsx(F,{})}),e.jsx(s,{path:"/admin/login",element:e.jsx(ne,{})}),e.jsx(s,{path:"/admin",element:e.jsx(T,{allowedRoles:["Admin","Artist","Viewer"],children:e.jsx(le,{})})}),e.jsx(s,{path:"/admin/panel",element:e.jsx(T,{allowedRoles:["Admin","Artist"],children:e.jsx(le,{})})}),e.jsx(s,{path:"/login",element:e.jsx(U,{})}),e.jsx(s,{path:"/signup",element:e.jsx($,{})}),e.jsx(s,{path:"/phone-login",element:e.jsx(H,{})}),e.jsx(s,{path:"/phone-signup",element:e.jsx(W,{})}),e.jsx(s,{path:"/profile",element:e.jsx(Y,{})}),e.jsx(s,{path:"/forgot-password",element:e.jsx(X,{})}),e.jsx(s,{path:"/reset-password/:token",element:e.jsx(J,{})}),e.jsx(s,{path:"/explore/state",element:e.jsx(G,{onStateClick:f})}),e.jsx(s,{path:"/explore/art",element:e.jsx(z,{})}),e.jsx(s,{path:"/explore/dance",element:e.jsx(Q,{})}),e.jsx(s,{path:"/explore/music",element:e.jsx(Z,{})}),e.jsx(s,{path:"/explore/crafts",element:e.jsx(ee,{})}),e.jsx(s,{path:"/events",element:e.jsx(te,{})}),e.jsx(s,{path:"/terms-of-service",element:e.jsx(B,{})}),e.jsx(s,{path:"/privacy-policy",element:e.jsx(K,{})}),e.jsx(s,{path:"/community-guidelines",element:e.jsx(q,{})}),e.jsx(s,{path:"*",element:e.jsx(M,{})})]})}),!c&&e.jsx("div",{className:"fixed inset-0 z-50 flex justify-center items-center",style:{backgroundColor:"#F8E6DA"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-transparent border-t-orange-500 mx-auto mb-6"}),e.jsx("div",{className:"text-xl font-bold",style:{color:"#2E2E2E",fontFamily:"system-ui, -apple-system, sans-serif"},children:"KalaSangam"}),e.jsxs("div",{className:"text-sm mt-2",style:{color:"#666",fontFamily:"system-ui, -apple-system, sans-serif"},children:["checking-dom"===d&&"Initializing...","checking-styles"===d&&"Loading styles...","checking-fonts"===d&&"Loading fonts...","finalizing"===d&&"Almost ready...","initializing"===d&&"Starting up...",!d&&"Preparing your cultural journey..."]}),e.jsx("div",{className:"w-48 h-1 bg-gray-200 rounded-full mt-4 mx-auto overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-orange-400 to-red-500 rounded-full animate-pulse"})})]})})]}),e.jsx(A,{})]}),("/"===t.pathname||"/home"===t.pathname)&&e.jsx(V,{}),e.jsx(p,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light",toastClassName:"toast-custom",bodyClassName:"toast-body-custom",progressClassName:"toast-progress-custom"})]})}function se(){const[t,o]=a.useState(()=>"/"===window.location.pathname&&!sessionStorage.getItem("splashShown"));return e.jsx(j,{children:e.jsx(N,{children:e.jsx(L,{children:t?e.jsx(O,{onContinue:()=>{sessionStorage.setItem("splashShown","true"),o(!1)}}):e.jsx(ie,{})})})})}h.createRoot(document.getElementById("root")).render(e.jsx(c.StrictMode,{children:e.jsxs(d,{children:[e.jsx(se,{}),e.jsx(p,{position:"top-center",autoClose:2e3})]})}));export{g as a,E as u};
