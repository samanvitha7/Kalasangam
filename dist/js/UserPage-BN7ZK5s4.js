import{j as e,m as t,A as a}from"./chunk-DrBkpLm2.js";import{r,u as l}from"./chunk-CMRBzt0a.js";import{a as i,u as o}from"./index-LrY4tx8y.js";import{y as n}from"./chunk-BWoFSTeq.js";import{g as s,A as d,C as c,a as m}from"./chunk-J4nWG5bO.js";import{a as h}from"./chunk-Bt6U1h1N.js";import{E as u}from"./chunk-DwQVkG9p.js";import{f as x,g as f,h as g,i as b,c as p,j as v,k as w,l as y}from"./chunk-Ca7r8q3n.js";import{F as N}from"./chunk-B12jDwHr.js";import"./chunk-ouJazw0A.js";import"./chunk-CPxFknmi.js";import"./chunk-C4w0ZaE1.js";import"./chunk-i2nP3W7I.js";import"./chunk-D-ukXXUr.js";const k=[{name:"Teal",bg:"bg-teal-500",text:"text-white"},{name:"Coral",bg:"bg-coral-red",text:"text-white"},{name:"Purple",bg:"bg-purple-500",text:"text-white"},{name:"Blue",bg:"bg-blue-500",text:"text-white"},{name:"Green",bg:"bg-green-500",text:"text-white"},{name:"Pink",bg:"bg-pink-500",text:"text-white"},{name:"Orange",bg:"bg-orange-500",text:"text-white"},{name:"Indigo",bg:"bg-indigo-500",text:"text-white"}];function C({currentAvatar:t,userName:a,onAvatarChange:l,isEditing:i=!1}){const[o,s]=r.useState((null==t?void 0:t.startsWith("http"))||(null==t?void 0:t.startsWith("data:"))?"image":(null==t?void 0:t.startsWith("color:"))?"color":"initials"),[d,c]=r.useState((null==t?void 0:t.startsWith("color:"))?t.split(":")[1]:"bg-teal-500"),[m,h]=r.useState("image"===o?t:null),[u,x]=r.useState(!1),f=r.useRef(),g=(null==a?void 0:a.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2))||"?",b=e=>{if(!e)return;if(!e.type.startsWith("image/"))return void n.error("Please select an image file");if(e.size>5242880)return void n.error("Image size should be less than 5MB");const t=new FileReader;t.onload=e=>{const t=e.target.result;h(t),s("image"),l&&l(t)},t.readAsDataURL(e)},p=()=>"image"===o&&m?e.jsx("img",{src:m,alt:"Profile",className:"w-32 h-32 rounded-full object-cover border-4 border-white shadow-lg"}):"color"===o?e.jsx("div",{className:`w-32 h-32 rounded-full border-4 border-white shadow-lg flex items-center justify-center ${d} text-white`,children:e.jsx("span",{className:"text-3xl font-bold",children:g})}):e.jsx("div",{className:"w-32 h-32 rounded-full border-4 border-white shadow-lg flex items-center justify-center bg-gray-200 text-gray-600",children:e.jsx("span",{className:"text-3xl font-bold",children:g})});return i?e.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[e.jsxs("div",{className:"relative",children:[p(),"image"===o&&e.jsx("button",{onClick:()=>{h(null),s("initials"),l&&l(""),f.current&&(f.current.value="")},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center hover:bg-red-600 transition-colors",children:"Ã—"})]}),e.jsxs("div",{className:"flex space-x-4 bg-gray-50 rounded-lg p-2",children:[e.jsx("button",{onClick:()=>{s("initials"),h(null),c("bg-teal-500"),l&&l("")},className:"px-4 py-2 rounded-lg font-medium transition-colors "+("initials"===o?"bg-white text-teal-600 shadow-sm":"text-gray-600 hover:text-gray-800"),children:"Initials"}),e.jsx("button",{onClick:()=>s("color"),className:"px-4 py-2 rounded-lg font-medium transition-colors "+("color"===o?"bg-white text-teal-600 shadow-sm":"text-gray-600 hover:text-gray-800"),children:"Color"}),e.jsx("button",{onClick:()=>{var e;return null==(e=f.current)?void 0:e.click()},className:"px-4 py-2 rounded-lg font-medium transition-colors "+("image"===o?"bg-white text-teal-600 shadow-sm":"text-gray-600 hover:text-gray-800"),children:"Image"})]}),"color"===o&&e.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Choose a color:"}),e.jsx("div",{className:"grid grid-cols-4 gap-3",children:k.map(t=>e.jsx("button",{onClick:()=>{return e=t.bg,c(e),s("color"),h(null),void(l&&l("color:"+e));var e},className:`w-12 h-12 rounded-full ${t.bg} border-4 transition-all duration-200 ${d===t.bg?"border-gray-800 scale-110":"border-white hover:scale-105"}`,title:t.name},t.name))})]}),"image"===o&&e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("input",{ref:f,type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];b(t)},className:"hidden"}),e.jsx("div",{className:"border-2 border-dashed rounded-lg p-8 text-center transition-colors "+(u?"border-teal-500 bg-teal-50":"border-gray-300 hover:border-gray-400"),onDrop:e=>{e.preventDefault(),x(!1);const t=e.dataTransfer.files[0];b(t)},onDragOver:e=>{e.preventDefault(),x(!0)},onDragLeave:e=>{e.preventDefault(),x(!1)},children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"mx-auto w-12 h-12 text-gray-400",children:e.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 48 48",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("div",{children:[e.jsx("button",{onClick:()=>{var e;return null==(e=f.current)?void 0:e.click()},className:"text-teal-600 hover:text-teal-700 font-medium",children:"Click to upload"}),e.jsx("p",{className:"text-gray-500",children:" or drag and drop"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 5MB"})]})})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 max-w-md",children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"ðŸ’¡ Profile Picture Tips"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:"â€¢ Use a high-quality, well-lit photo"}),e.jsx("li",{children:"â€¢ Square images work best"}),e.jsx("li",{children:"â€¢ Make sure your face is clearly visible"}),e.jsx("li",{children:"â€¢ Choose colors that reflect your artistic style"})]})]})]}):e.jsxs("div",{className:"flex flex-col items-center",children:[p(),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Profile Picture"})]})}function E({userId:a}){const[l,o]=r.useState(null),[n,s]=r.useState(!0),[d,c]=r.useState(null);r.useEffect(()=>{m()},[]),r.useEffect(()=>{const e=()=>{m()};return window.addEventListener("artworkCreated",e),()=>{window.removeEventListener("artworkCreated",e)}},[]);const m=async()=>{try{s(!0);const e=await i.get("/api/users/activity");o(e.data.activity)}catch(e){try{const e=(await i.get("/api/users/stats")).data.stats;o({likedArtworks:[],bookmarkedArtworks:[],myArtworks:[],totalLikes:e.likesCount||0,totalBookmarks:e.bookmarksCount||0,totalArtworks:e.artworksCount||0})}catch(t){c("Failed to load recent activity")}}finally{s(!1)}};if(n)return e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#E05264]"}),e.jsx("span",{className:"ml-3 text-[#134856] font-lora",children:"Loading activity..."})]});if(d)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-4xl mb-4",children:"âš ï¸"}),e.jsx("p",{className:"text-lg font-lora text-red-500",children:d})]});if(l&&(l.likedArtworks&&l.likedArtworks.length>0||l.bookmarkedArtworks&&l.bookmarkedArtworks.length>0||l.myArtworks&&l.myArtworks.length),!l)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸŽ¨"}),e.jsx("p",{className:"text-xl font-lora font-semibold text-[#E05264] mb-2",children:"No recent activity yet"}),e.jsx("p",{className:"text-[#F48C8C] font-lora",children:"Start exploring artworks to build your activity feed!"})]});const h=({item:a,type:r,icon:l})=>e.jsxs(t.div,{className:"flex items-center space-x-4 p-4 bg-white/50 rounded-xl hover:bg-white/70 transition-all cursor-pointer",whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},children:[e.jsx("div",{className:"flex-shrink-0",children:a.imageUrl?e.jsx("img",{src:a.imageUrl,alt:a.title,className:"w-12 h-12 rounded-lg object-cover border-2 border-white shadow-sm"}):e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-[#1d7c6f] to-[#f58c8c] flex items-center justify-center text-white text-xl",children:"ðŸŽ¨"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"text-lg",children:l}),e.jsxs("p",{className:"text-sm font-semibold text-[#134856] font-lora",children:["liked"===r&&"Liked artwork","bookmarked"===r&&"Bookmarked artwork","created"===r&&"Created artwork"]})]}),e.jsx("p",{className:"text-base font-medium text-[#E05264] truncate font-dm-serif",children:a.title||"Untitled"}),e.jsxs("p",{className:"text-xs text-[#F48C8C] font-lora",children:[a.category&&a.category+" â€¢ ",new Date(a.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]})]}),u=[];l.likedArtworks&&l.likedArtworks.forEach(e=>{u.push({...e,activityType:"liked",icon:"â¤ï¸"})}),l.bookmarkedArtworks&&l.bookmarkedArtworks.forEach(e=>{u.push({...e,activityType:"bookmarked",icon:"ðŸ”–"})}),l.myArtworks&&l.myArtworks.forEach(e=>{u.push({...e,activityType:"created",icon:"ðŸŽ¨"})}),u.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt));const x=u.slice(0,10);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-3 bg-white/30 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-[#134856] font-dm-serif",children:l.totalLikes||0}),e.jsx("div",{className:"text-sm text-[#E05264] font-lora",children:"Likes"})]}),e.jsxs("div",{className:"text-center p-3 bg-white/30 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-[#134856] font-dm-serif",children:l.totalBookmarks||0}),e.jsx("div",{className:"text-sm text-[#E05264] font-lora",children:"Bookmarks"})]}),e.jsxs("div",{className:"text-center p-3 bg-white/30 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-[#134856] font-dm-serif",children:l.totalArtworks||0}),e.jsx("div",{className:"text-sm text-[#E05264] font-lora",children:"Artworks"})]})]}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:x.length>0?x.map((a,r)=>e.jsx(t.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.05*r},children:e.jsx(h,{item:a,type:a.activityType,icon:a.icon})},`activity-${a.t||a.id}-${r}`)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-3",children:"ðŸŽ¨"}),e.jsx("p",{className:"text-lg font-lora font-semibold text-[#E05264] mb-2",children:"No recent activities to show"}),e.jsx("p",{className:"text-[#F48C8C] font-lora text-sm",children:l.totalLikes+l.totalBookmarks+l.totalArtworks>0?"Your detailed activity will appear here as you interact with artworks.":"Start exploring artworks to build your activity feed!"})]})}),u.length>10&&e.jsx("div",{className:"text-center pt-4",children:e.jsx("p",{className:"text-sm text-[#F48C8C] font-lora",children:"Showing latest 10 activities"})})]})}function A({profile:a,stats:l,onProfileUpdate:o}){var c,m,h,u,x,f;const[g,b]=r.useState(!1),[p,v]=r.useState({name:(null==a?void 0:a.name)||"",avatar:(null==a?void 0:a.avatar)||"",portfolioUrl:(null==a?void 0:a.portfolioUrl)||"",socialLinks:(null==a?void 0:a.socialLinks)||{instagram:"",twitter:"",website:""}}),[w,y]=r.useState(!1),[N,k]=r.useState(l);return r.useEffect(()=>{k(l)},[l]),r.useEffect(()=>{const e=s.on(d.BOOKMARKED,e=>{e.userId===(null==a?void 0:a.id)&&k(e=>({...e,bookmarksCount:((null==e?void 0:e.bookmarksCount)||0)+1}))}),t=s.on(d.UNBOOKMARKED,e=>{e.userId===(null==a?void 0:a.id)&&k(e=>({...e,bookmarksCount:Math.max(((null==e?void 0:e.bookmarksCount)||0)-1,0)}))}),r=s.on(d.CREATED,e=>{e.userId===(null==a?void 0:a.id)&&(null==o||o())});return()=>{e(),t(),r()}},[null==a?void 0:a.id,o]),e.jsxs("div",{className:"space-y-8",children:[e.jsxs(t.div,{className:"flex items-center justify-between",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[e.jsx("h2",{className:"text-4xl font-bold font-dm-serif bg-gradient-to-r from-[#134856] to-[#e05264] bg-clip-text text-transparent",children:"Artist Profile"}),!g&&e.jsx(t.button,{onClick:()=>{b(!0),v({name:(null==a?void 0:a.name)||"",avatar:(null==a?void 0:a.avatar)||"",portfolioUrl:(null==a?void 0:a.portfolioUrl)||"",socialLinks:(null==a?void 0:a.socialLinks)||{instagram:"",twitter:"",website:""}})},className:"bg-gradient-to-r from-[#1d7c6f] to-[#f58c8c] text-white px-6 py-3 rounded-full font-semibold shadow-lg hover:shadow-xl transition-all duration-300 font-dm-serif",whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},children:"Edit Profile"})]}),e.jsxs(t.div,{className:"grid md:grid-cols-5 gap-8",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[e.jsxs("div",{className:"md:col-span-3 flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:"text-center lg:text-left",children:e.jsx(C,{currentAvatar:p.avatar,userName:null==a?void 0:a.name,onAvatarChange:e=>v({...p,avatar:e}),isEditing:g})}),e.jsx("div",{className:"flex-1",children:g?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium font-lora text-[#134856] mb-1",children:"Name"}),e.jsx("input",{type:"text",value:p.name,onChange:e=>v({...p,name:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#E05264] focus:border-transparent font-lora"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium font-lora text-[#134856] mb-1",children:"Portfolio URL"}),e.jsx("input",{type:"url",value:p.portfolioUrl,onChange:e=>v({...p,portfolioUrl:e.target.value}),placeholder:"https://your-portfolio.com",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#E05264] focus:border-transparent font-lora"})]})]}):e.jsxs("div",{children:[e.jsx("h3",{className:"text-3xl font-bold font-dm-serif mb-2 bg-gradient-to-r from-[#134856] to-[#e05264] bg-clip-text text-transparent",children:null==a?void 0:a.name}),e.jsx("p",{className:"text-xl font-lora font-semibold text-[#E05264] mb-4",children:null==a?void 0:a.email}),(null==a?void 0:a.portfolioUrl)&&e.jsx("a",{href:a.portfolioUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-[#134856] hover:text-[#E05264] font-lora font-semibold mb-4 transition-colors",children:"ðŸŒ Portfolio"}),e.jsxs("div",{className:"text-sm font-lora text-[#F48C8C]",children:[e.jsxs("p",{children:["Member since: ",new Date(null==a?void 0:a.createdAt).toLocaleDateString()]}),e.jsxs("p",{children:["Last updated: ",new Date(null==a?void 0:a.updatedAt).toLocaleDateString()]})]})]})})]}),e.jsx("div",{className:"md:col-span-2",children:g?e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-bold font-dm-serif text-[#134856] mb-3",children:"Social Links"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium font-lora text-[#134856] mb-1",children:"Instagram"}),e.jsx("input",{type:"url",value:p.socialLinks.instagram,onChange:e=>v({...p,socialLinks:{...p.socialLinks,instagram:e.target.value}}),placeholder:"https://instagram.com/username",className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#E05264] focus:border-transparent font-lora text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium font-lora text-[#134856] mb-1",children:"Twitter"}),e.jsx("input",{type:"url",value:p.socialLinks.twitter,onChange:e=>v({...p,socialLinks:{...p.socialLinks,twitter:e.target.value}}),placeholder:"https://twitter.com/username",className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#E05264] focus:border-transparent font-lora text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium font-lora text-[#134856] mb-1",children:"Website"}),e.jsx("input",{type:"url",value:p.socialLinks.website,onChange:e=>v({...p,socialLinks:{...p.socialLinks,website:e.target.value}}),placeholder:"https://your-website.com",className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#E05264] focus:border-transparent font-lora text-sm"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx(t.button,{onClick:async()=>{var e,t;y(!0);try{await i.put("/api/users/profile",p),n.success("Profile updated successfully!"),b(!1),o()}catch(a){n.error((null==(t=null==(e=a.response)?void 0:e.data)?void 0:t.message)||"Failed to update profile")}finally{y(!1)}},disabled:w,className:"bg-gradient-to-r from-[#1d7c6f] to-[#f58c8c] text-white px-6 py-3 rounded-full font-semibold shadow-lg hover:shadow-xl transition-all duration-300 font-dm-serif disabled:opacity-50 flex-1",whileHover:{scale:w?1:1.05,y:w?0:-2},whileTap:{scale:w?1:.95},children:w?"Saving...":"Save"}),e.jsx(t.button,{onClick:()=>{b(!1),v({name:(null==a?void 0:a.name)||"",avatar:(null==a?void 0:a.avatar)||"",portfolioUrl:(null==a?void 0:a.portfolioUrl)||"",socialLinks:(null==a?void 0:a.socialLinks)||{instagram:"",twitter:"",website:""}})},className:"bg-white text-[#134856] border border-gray-300 px-6 py-3 rounded-full font-semibold hover:bg-gray-50 transition-all duration-300 font-dm-serif flex-1",whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},children:"Cancel"})]})]}):e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold font-dm-serif text-[#134856] mb-3",children:"Connect"}),e.jsxs("div",{className:"space-y-2",children:[(null==(c=null==a?void 0:a.socialLinks)?void 0:c.instagram)&&e.jsx("a",{href:a.socialLinks.instagram,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-[#134856] hover:text-[#E05264] font-lora transition-colors",children:"ðŸ“· Instagram"}),(null==(m=null==a?void 0:a.socialLinks)?void 0:m.twitter)&&e.jsx("a",{href:a.socialLinks.twitter,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-[#134856] hover:text-[#E05264] font-lora transition-colors",children:"ðŸ¦ Twitter"}),(null==(h=null==a?void 0:a.socialLinks)?void 0:h.website)&&e.jsx("a",{href:a.socialLinks.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-[#134856] hover:text-[#E05264] font-lora transition-colors",children:"ðŸŒ Website"}),!(null==(u=null==a?void 0:a.socialLinks)?void 0:u.instagram)&&!(null==(x=null==a?void 0:a.socialLinks)?void 0:x.twitter)&&!(null==(f=null==a?void 0:a.socialLinks)?void 0:f.website)&&e.jsx("p",{className:"text-[#F48C8C] font-lora text-sm",children:"No social links added yet"})]})]})})]}),e.jsxs(t.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:[e.jsx("h3",{className:"text-2xl font-bold font-dm-serif mb-6 bg-gradient-to-r from-[#134856] to-[#e05264] bg-clip-text text-transparent",children:"Artist Statistics"}),e.jsx("div",{className:"h-px bg-gradient-to-r from-[#134856]/30 via-[#e05264]/30 to-[#134856]/30 mb-8"}),e.jsx(t.div,{className:"rounded-3xl p-8 bg-gradient-to-r from-[#1D7C6F] to-[#F48C8C] shadow-[0_0_30px_rgba(244,140,140,0.3)] text-white",whileHover:{scale:1.01},transition:{duration:.3},children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 text-center font-lora",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold mb-1",children:(null==N?void 0:N.likesCount)||0}),e.jsx("div",{className:"text-sm font-medium",children:"Likes Given"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold mb-1",children:(null==N?void 0:N.bookmarksCount)||0}),e.jsx("div",{className:"text-sm font-medium",children:"Bookmarks"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold mb-1",children:(null==l?void 0:l.followsCount)||0}),e.jsx("div",{className:"text-sm font-medium",children:"Following"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold mb-1",children:(null==l?void 0:l.followersCount)||0}),e.jsx("div",{className:"text-sm font-medium",children:"Followers"})]})]})})]}),e.jsxs(t.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},children:[e.jsx("h3",{className:"text-2xl font-bold font-dm-serif mb-6 bg-gradient-to-r from-[#134856] to-[#e05264] bg-clip-text text-transparent",children:"Recent Activity"}),e.jsx("div",{className:"h-px bg-gradient-to-r from-[#134856]/30 via-[#e05264]/30 to-[#134856]/30 mb-8"}),e.jsx("div",{className:"bg-gray-50/80 border-2 border-[#e05264]/20 shadow-[0_0_20px_rgba(224,82,100,0.2)] rounded-2xl p-6",children:e.jsx(E,{userId:null==a?void 0:a.id})})]})]})}function F({user:a,onLogout:l}){const[o,s]=r.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[d,c]=r.useState({password:"",confirmText:""}),[m,h]=r.useState(!1),[u,x]=r.useState(!1);return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsx(t.div,{className:"bg-gradient-to-br from-[#1d7c6f] to-[#f58c8c] rounded-3xl shadow-2xl p-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:e.jsxs("div",{className:"bg-[#F8E6DA] rounded-2xl p-8",children:[e.jsx("h2",{className:"text-3xl font-bold font-dm-serif mb-6 bg-gradient-to-r from-[#134856] to-[#e05264] bg-clip-text text-transparent",children:"Change Password"}),e.jsxs("form",{onSubmit:async e=>{var t,a;if(e.preventDefault(),o.newPassword===o.confirmPassword)if(6>o.newPassword.length)n.error("New password must be at least 6 characters");else{x(!0);try{await i.put("/api/users/change-password",{currentPassword:o.currentPassword,newPassword:o.newPassword}),n.success("Password changed successfully!"),s({currentPassword:"",newPassword:"",confirmPassword:""})}catch(r){n.error((null==(a=null==(t=r.response)?void 0:t.data)?void 0:a.message)||"Failed to change password")}finally{x(!1)}}else n.error("New passwords do not match")},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium font-lora text-[#134856] mb-2",children:"Current Password"}),e.jsx("input",{type:"password",required:!0,value:o.currentPassword,onChange:e=>s({...o,currentPassword:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#E05264] focus:border-transparent font-lora"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium font-lora text-[#134856] mb-2",children:"New Password"}),e.jsx("input",{type:"password",required:!0,minLength:"6",value:o.newPassword,onChange:e=>s({...o,newPassword:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#E05264] focus:border-transparent font-lora"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium font-lora text-[#134856] mb-2",children:"Confirm New Password"}),e.jsx("input",{type:"password",required:!0,minLength:"6",value:o.confirmPassword,onChange:e=>s({...o,confirmPassword:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#E05264] focus:border-transparent font-lora"})]}),e.jsx(t.button,{type:"submit",disabled:u,className:"bg-gradient-to-r from-[#1d7c6f] to-[#f58c8c] text-white px-6 py-3 rounded-full font-semibold shadow-lg hover:shadow-xl transition-all duration-300 font-dm-serif disabled:opacity-50",whileHover:{scale:u?1:1.05,y:u?0:-2},whileTap:{scale:u?1:.95},children:u?"Changing Password...":"Change Password"})]})]})}),e.jsx(t.div,{className:"bg-gradient-to-br from-red-500 to-red-600 rounded-3xl shadow-2xl p-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:e.jsxs("div",{className:"bg-[#F8E6DA] rounded-2xl p-8 border-l-4 border-red-500",children:[e.jsx("h2",{className:"text-3xl font-bold font-dm-serif text-red-600 mb-2",children:"âš ï¸ Danger Zone"}),e.jsx("p",{className:"text-[#E05264] font-lora mb-6",children:"Once you delete your account, there is no going back. Please be certain."}),m?e.jsxs("div",{className:"bg-red-50 rounded-2xl p-6 border border-red-200",children:[e.jsx("h3",{className:"text-xl font-bold font-dm-serif text-red-800 mb-4",children:"ðŸš¨ Oh no! You're in dangerous territory!"}),e.jsx("p",{className:"text-red-700 font-lora mb-4",children:"This action cannot be undone. This will permanently delete your account, all your artworks, likes, and followers. Are you absolutely sure?"}),e.jsxs("form",{onSubmit:async e=>{var t,a;if(e.preventDefault(),"DELETE MY ACCOUNT"===d.confirmText){x(!0);try{await i.delete("/api/users/delete-account",{data:{password:d.password}}),n.success("Account deleted successfully"),l()}catch(r){n.error((null==(a=null==(t=r.response)?void 0:t.data)?void 0:a.message)||"Failed to delete account")}finally{x(!1)}}else n.error('Please type "DELETE MY ACCOUNT" to confirm')},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium font-lora text-red-700 mb-2",children:"Enter your password to confirm:"}),e.jsx("input",{type:"password",required:!0,value:d.password,onChange:e=>c({...d,password:e.target.value}),className:"w-full px-4 py-3 border border-red-300 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-transparent font-lora"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium font-lora text-red-700 mb-2",children:'Type "DELETE MY ACCOUNT" to confirm:'}),e.jsx("input",{type:"text",required:!0,value:d.confirmText,onChange:e=>c({...d,confirmText:e.target.value}),placeholder:"DELETE MY ACCOUNT",className:"w-full px-4 py-3 border border-red-300 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-transparent font-lora"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(t.button,{type:"submit",disabled:u,className:"bg-gradient-to-r from-red-500 to-red-600 text-white px-6 py-3 rounded-full font-semibold shadow-lg hover:shadow-xl transition-all duration-300 font-dm-serif disabled:opacity-50",whileHover:{scale:u?1:1.05,y:u?0:-2},whileTap:{scale:u?1:.95},children:u?"Deleting Account...":"Yes, Delete My Account"}),e.jsx(t.button,{type:"button",onClick:()=>{h(!1),c({password:"",confirmText:""})},className:"bg-white text-[#134856] border border-gray-300 px-6 py-3 rounded-full font-semibold hover:bg-gray-50 transition-all duration-300 font-dm-serif",whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},children:"Cancel"})]})]})]}):e.jsx(t.button,{onClick:()=>h(!0),className:"bg-gradient-to-r from-red-500 to-red-600 text-white px-6 py-3 rounded-full font-semibold shadow-lg hover:shadow-xl transition-all duration-300 font-dm-serif",whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},children:"Delete My Account"})]})}),e.jsx(t.div,{className:"bg-gradient-to-br from-[#1d7c6f] to-[#f58c8c] rounded-3xl shadow-2xl p-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:e.jsxs("div",{className:"bg-[#F8E6DA] rounded-2xl p-8",children:[e.jsx("h2",{className:"text-3xl font-bold font-dm-serif mb-6 bg-gradient-to-r from-[#134856] to-[#e05264] bg-clip-text text-transparent",children:"Account Information"}),e.jsxs("div",{className:"space-y-4 font-lora",children:[e.jsxs("div",{className:"text-[#134856]",children:[e.jsx("strong",{children:"Name:"})," ",e.jsx("span",{className:"text-[#E05264]",children:null==a?void 0:a.name})]}),e.jsxs("div",{className:"text-[#134856]",children:[e.jsx("strong",{children:"Email:"})," ",e.jsx("span",{className:"text-[#E05264]",children:null==a?void 0:a.email})]}),e.jsxs("div",{className:"text-[#134856]",children:[e.jsx("strong",{children:"Account Status:"}),e.jsx("span",{className:"ml-2 px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-semibold",children:"Active"})]}),e.jsxs("div",{className:"text-[#134856]",children:[e.jsx("strong",{children:"Member Since:"})," ",e.jsx("span",{className:"text-[#E05264]",children:new Date((null==a?void 0:a.createdAt)||Date.now()).toLocaleDateString()})]})]})]})})]})}function D({userId:a}){const[l,i]=r.useState([]),[o,m]=r.useState(!0),[u,x]=r.useState("all"),[f,g]=r.useState(!1),[b,p]=r.useState(null);r.useEffect(()=>{v()},[a]),r.useEffect(()=>{const e=s.on(d.CREATED,e=>{e.userId===a&&v()}),t=s.on(d.UPDATED,e=>{e.userId===a&&v()}),r=s.on(d.DELETED,e=>{e.userId===a&&v()}),l=e=>{"artworkCreated"===e.key&&(v(),localStorage.removeItem("artworkCreated"))},i=()=>{v()};return window.addEventListener("storage",l),window.addEventListener("artworkCreated",i),()=>{e(),t(),r(),window.removeEventListener("storage",l),window.removeEventListener("artworkCreated",i)}},[a]);const v=async()=>{try{const e=await h.getCurrentUser();if(!e||!e.user)throw Error("Failed to get current user");const t=e.user.id,a=await h.getArtworks({userId:t,limit:50}),r=(null==a?void 0:a.data)||a||[];i(Array.isArray(r)?r:[])}catch(e){n.error("Failed to load artworks"),i([])}finally{m(!1)}},w=()=>{p(null),g(!0)},y=l.filter(e=>"all"===u||("published"===u?e.isPublic&&e.isActive:"draft"!==u||!e.isPublic||!e.isActive));return o?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"text-xl font-serif text-transparent bg-gradient-to-r from-[#E05264] to-[#134856] bg-clip-text",children:"Loading your artworks..."})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-serif font-bold text-transparent bg-gradient-to-r from-[#E05264] to-[#134856] bg-clip-text mb-2",children:"My Artworks"}),e.jsxs("p",{className:"text-gray-600 font-serif",children:[l.length," total artworks"]})]}),e.jsx("button",{onClick:w,className:"px-6 py-3 bg-gradient-to-r from-[#1D7C6F] to-[#F48C8C] text-white rounded-full hover:shadow-lg transition-all duration-300 font-serif font-medium",children:"+ Add New Artwork"})]}),e.jsx("div",{className:"flex space-x-4 mb-8",children:[{id:"all",label:"All",count:l.length},{id:"published",label:"Published",count:l.filter(e=>e.isPublic&&e.isActive).length},{id:"draft",label:"Drafts",count:l.filter(e=>!e.isPublic||!e.isActive).length}].map(a=>e.jsxs(t.button,{onClick:()=>x(a.id),whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-6 py-3 rounded-full font-serif font-medium transition-all duration-300 "+(u===a.id?"bg-gradient-to-r from-[#1D7C6F] to-[#F48C8C] text-white shadow-lg":"bg-white/70 backdrop-blur-sm text-gray-700 hover:bg-white/90 border border-gray-200/50 hover:shadow-md"),children:[a.label," (",a.count,")"]},a.id))}),0===y.length?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸŽ¨"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No artworks yet"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Start sharing your artistic creations with the community!"}),e.jsx("button",{onClick:w,className:"px-6 py-3 bg-gradient-to-r from-[#1D7C6F] to-[#F48C8C] text-white rounded-lg hover:shadow-lg transition-all duration-300",children:"Create Your First Artwork"})]}):e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(t=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:t.imageUrl||t.image,alt:t.title,className:"w-full h-48 object-cover"}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+(t.isPublic&&t.isActive?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:t.isPublic&&t.isActive?"âœ“ Published":"ðŸ“ Draft"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t.title}),e.jsx("button",{className:"text-gray-400 hover:text-gray-600 transition-colors",children:"â‹¯"})]}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:t.category||t.artform}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx("span",{className:"text-red-500 mr-1",children:"â¤ï¸"}),e.jsxs("span",{className:"text-sm",children:[t.likes&&t.likes.length||0," likes"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>(e=>{p(e),g(!0)})(t),className:"px-3 py-1 text-sm text-white bg-gradient-to-r from-[#1D7C6F] to-[#F48C8C] hover:shadow-lg rounded transition-all duration-300",children:"Edit"}),e.jsx("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this artwork?"))try{await h.deleteArtwork(e),i(t=>t.filter(t=>t.t!==e)),n.success("Artwork deleted successfully")}catch{n.error("Failed to delete artwork")}})(t.t),className:"px-3 py-1 text-sm text-white bg-gradient-to-r from-red-500 to-red-600 hover:shadow-lg rounded transition-all duration-300",children:"Delete"})]})]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-3",children:["Created ",t.createdAt?new Date(t.createdAt).toLocaleDateString():"N/A"]})]})]},t.t))}),e.jsxs("div",{className:"mt-12 rounded-2xl p-8 bg-gradient-to-br from-[#1D7C6F] to-[#F48C8C] text-white font-lora grid grid-cols-2 md:grid-cols-4 gap-6 shadow-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:l.length}),e.jsx("div",{children:"Total Artworks"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:l.filter(e=>e.isPublic&&e.isActive).length}),e.jsx("div",{children:"Published"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:l.reduce((e,t)=>{var a;return e+((null==(a=t.likes)?void 0:a.length)||0)},0)}),e.jsx("div",{children:"Total Likes"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:l.length>0?Math.round(l.reduce((e,t)=>{var a;return e+((null==(a=t.likes)?void 0:a.length)||0)},0)/l.length):0}),e.jsx("div",{children:"Avg. Likes"})]})]}),e.jsx(c,{isOpen:f,onClose:()=>{g(!1),p(null)},onSubmit:async e=>{try{if(b){const t=await h.updateArtwork(b.t||b.id,e),a=t.data||t;i(e=>e.map(e=>(e.t||e.id)===(b.t||b.id)?a:e)),n.success("Your artwork has been updated successfully!")}else{const t=await h.createArtwork(e),a=t.data||t;i([a,...l]),n.success("Your artwork has been added successfully!")}g(!1),p(null)}catch{n.error(b?"Failed to update artwork":"Failed to create artwork")}},editingArtwork:b})]})}function L({userId:t}){const[a,l]=r.useState([]),[i,o]=r.useState(!0),[s,d]=r.useState("all"),[c,m]=r.useState(!1),[x,f]=r.useState(null);r.useEffect(()=>{g()},[t]);const g=async()=>{try{const e=await h.getCurrentUser();if(!e||!e.user)throw Error("Failed to get current user");const t=e.user.id,a=await h.getEvents({organizer:t}),r=(null==a?void 0:a.data)||a||[],i=Array.isArray(r)?r.filter(e=>e.organizer===t||e.organizerId===t||e.createdBy&&e.createdBy===t):[];l(i)}catch(e){n.error("Failed to load events"),l([])}finally{o(!1)}},b=()=>{m(!1),f(null)},p=a.filter(e=>{if("all"===s)return!0;const t=new Date(e.date),a=new Date;return"upcoming"===s?t>=a:"past"!==s||a>t}),v=a.filter(e=>new Date(e.date)>=new Date),w=a.filter(e=>new Date(e.date)<new Date);return i?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"text-xl text-teal-600",children:"Loading your events..."})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-teal-800",children:"My Events"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:[a.length," total events"]})]}),e.jsxs("button",{onClick:()=>m(!0),className:"px-6 py-3 bg-gradient-to-r from-[#1D7C6F] to-[#F48C8C] text-white rounded-lg hover:shadow-lg transition-all duration-300 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add New Event"]})]}),e.jsx("div",{className:"flex space-x-4 mb-8",children:[{id:"all",label:"All",count:a.length},{id:"upcoming",label:"Upcoming",count:v.length},{id:"past",label:"Past",count:w.length}].map(t=>e.jsxs("button",{onClick:()=>d(t.id),className:"px-4 py-2 rounded-lg font-medium transition-colors "+(s===t.id?"bg-gradient-to-r from-[#1D7C6F] to-[#F48C8C] text-white":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200"),children:[t.label," (",t.count,")"]},t.id))}),0===p.length?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“…"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No events yet"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Start organizing events to engage with the traditional arts community!"}),e.jsx("button",{onClick:()=>m(!0),className:"px-6 py-3 bg-gradient-to-r from-[#1D7C6F] to-[#F48C8C] text-white rounded-lg hover:shadow-lg transition-all duration-300",children:"Create Your First Event"})]}):e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map(t=>{var a,r;const i=new Date(t.date),o=i>=new Date;return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow",children:[e.jsxs("div",{className:"relative",children:[t.imageUrl?e.jsx("img",{src:t.imageUrl,alt:t.title,className:"w-full h-48 object-cover"}):e.jsx("div",{className:"w-full h-48 bg-gradient-to-br from-teal-100 to-blue-100 flex items-center justify-center",children:e.jsx("div",{className:"text-6xl text-teal-400",children:"ðŸŽ­"})}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+(o?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:o?"ðŸ“… Upcoming":"ðŸ• Past"})}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx("span",{className:"bg-white bg-opacity-90 px-2 py-1 rounded-full text-xs font-medium text-gray-700",children:t.type?t.type.charAt(0).toUpperCase()+t.type.slice(1):"Event"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-2",children:t.title})}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:t.description}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-500 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsxs("span",{children:[i.toLocaleDateString()," at ",t.time||"TBD"]})]}),t.location&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsxs("span",{className:"truncate",children:[(null==(a=t.location)?void 0:a.venue)||"TBD",", ",(null==(r=t.location)?void 0:r.city)||"TBD"]})]}),t.price>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),e.jsxs("span",{children:["â‚¹",t.price]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-400",children:["Created ",new Date(t.createdAt).toLocaleDateString()]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>(e=>{f(e)})(t),className:"px-3 py-1 text-sm text-white bg-gradient-to-r from-[#1D7C6F] to-[#F48C8C] hover:shadow-lg rounded transition-all duration-300",children:"Edit"}),e.jsx("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this event?"))try{await h.deleteEvent(e),l(t=>t.filter(t=>t.id!==e)),n.success("Event deleted successfully")}catch(t){n.error("Failed to delete event")}})(t.id),className:"px-3 py-1 text-sm text-white bg-gradient-to-r from-red-500 to-red-600 hover:shadow-lg rounded transition-all duration-300",children:"Delete"})]})]})]})]},t.id)})}),e.jsxs("div",{className:"mt-12 rounded-2xl p-8 bg-gradient-to-r from-[#1D7C6F] to-[#F48C8C] text-white font-lora grid grid-cols-2 md:grid-cols-4 gap-6 shadow-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:a.length}),e.jsx("div",{children:"Total Events"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:v.length}),e.jsx("div",{children:"Upcoming"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:w.length}),e.jsx("div",{children:"Completed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:a.filter(e=>!0===e.registrationRequired).length}),e.jsx("div",{children:"With Registration"})]})]}),e.jsx(u,{isOpen:c,onClose:b,onSubmit:async e=>{try{const a={id:Date.now(),...e,createdAt:(new Date).toISOString(),organizer:t};l(e=>[a,...e]),n.success("Event created successfully!"),m(!1)}catch(a){n.error("Failed to create event")}}}),x&&e.jsx(u,{isOpen:!!x,onClose:b,onSubmit:async e=>{try{const t={...x,...e,updatedAt:(new Date).toISOString()};l(e=>e.map(e=>e.id===x.id?t:e)),n.success("Event updated successfully!"),f(null)}catch(t){n.error("Failed to update event")}},event:x,isEditing:!0})]})}const P=({userId:a})=>{const[l,i]=r.useState([]),[o,s]=r.useState([]),[d,c]=r.useState(!0),[u,g]=r.useState("liked");r.useEffect(()=>{b()},[a]);const b=async()=>{try{c(!0);const e=await h.getCurrentUser();if(!e||!e.user)throw Error("Failed to get current user");const t=e.user,a=t.likes||[],r=t.bookmarks||[];if(0===a.length&&0===r.length)return i([]),void s([]);const l=await h.getArtworks({limit:200}),o=(null==l?void 0:l.data)||l||[];if(Array.isArray(o)){const e=o.map(e=>({id:e.t||e.id,title:e.title||e.name,description:e.description,artist:e.artist||"Cultural Heritage",imageUrl:e.imageUrl||e.image,category:e.category||"Traditional Art",likes:e.likes||0,bookmarks:e.bookmarks||0,createdAt:e.createdAt||(new Date).toISOString(),userId:e.userId||e.artistId,origin:e.origin,likesArray:e.likesArray||[],bookmarksArray:e.bookmarksArray||[]})),t=e.filter(e=>{const t=e.id.toString();return a.some(e=>e.toString()===t)}),l=e.filter(e=>{const t=e.id.toString();return r.some(e=>e.toString()===t)});i(t),s(l)}else i([]),s([])}catch(e){n.error("Failed to load your artworks"),i([]),s([])}finally{c(!1)}},p=async e=>{try{await h.toggleLike(e),i(t=>t.filter(t=>t.id!==e)),n.success("Artwork unliked")}catch(t){n.error("Failed to update like")}},v=async e=>{try{await h.toggleBookmark(e),s(t=>t.filter(t=>t.id!==e)),n.success("Bookmark removed")}catch(t){n.error("Failed to update bookmark")}},w="liked"===u?l:o;return d?e.jsx("div",{className:"flex justify-center items-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#E05264]"})}):e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsxs("div",{className:"bg-white rounded-full p-1 shadow-lg border border-gray-200",children:[e.jsxs("button",{onClick:()=>g("liked"),className:`px-6 py-3 rounded-full font-semibold text-sm transition-all duration-300 flex items-center gap-2 ${"liked"===u?"bg-gradient-to-r from-[#1d7c6f] to-[#f58c8c] text-white shadow-lg":"text-[#134856] hover:bg-gray-50"} font-dm-serif`,children:[e.jsx(x,{className:"text-red-500"}),"Liked Artworks (",l.length,")"]}),e.jsxs("button",{onClick:()=>g("bookmarked"),className:`px-6 py-3 rounded-full font-semibold text-sm transition-all duration-300 flex items-center gap-2 ${"bookmarked"===u?"bg-gradient-to-r from-[#1d7c6f] to-[#f58c8c] text-white shadow-lg":"text-[#134856] hover:bg-gray-50"} font-dm-serif`,children:[e.jsx(f,{className:"text-amber-600"}),"Bookmarked (",o.length,")"]})]})}),0===w.length?e.jsxs(t.div,{className:"text-center py-16",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[e.jsx("div",{className:"text-6xl mb-4",children:"liked"===u?"â¤ï¸":"ðŸ”–"}),e.jsxs("h3",{className:"text-2xl font-semibold font-dm-serif mb-2 bg-gradient-to-r from-[#134856] to-[#e05264] bg-clip-text text-transparent",children:["No ","liked"===u?"Liked":"Bookmarked"," Artworks"]}),e.jsxs("p",{className:"text-[#E05264] font-lora mb-4",children:["You haven't ","liked"===u?"liked":"bookmarked"," any artworks yet."]}),e.jsxs("p",{className:"text-gray-500 font-lora",children:["Visit the Art Wall to discover and ","liked"===u?"like":"bookmark"," amazing artworks!"]})]}):e.jsx(t.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},children:w.map((t,a)=>e.jsx(m,{artwork:t,index:a,currentUser:{likes:l.map(e=>e.id)},isBookmarked:"bookmarked"===u||o.some(e=>e.id===t.id),onLike:p,onBookmark:v,onImageClick:()=>{}},t.id))})]})};function j(){var s;const{user:d,logout:c}=o(),[m,h]=r.useState("profile"),[u,f]=r.useState(null),[k,C]=r.useState(null),[E,j]=r.useState(!0),T=l();r.useEffect(()=>{d?M():T("/login")},[d,T]);const M=async()=>{try{const[e,t]=await Promise.all([i.get("/api/users/profile"),i.get("/api/users/stats")]);f(e.data.user),C(t.data.stats)}catch(e){n.error("Failed to load user data")}finally{j(!1)}},B=async()=>{await c(),n.success("Logged out successfully"),T("/login")},S=()=>{const a=Array.from({length:20},(e,t)=>({id:t,size:4*Math.random()+2,color:["rgba(19, 72, 86, 0.6)","rgba(224, 82, 100, 0.6)","rgba(244, 140, 140, 0.6)","rgba(29, 124, 111, 0.6)","rgba(255, 215, 0, 0.6)"][Math.floor(5*Math.random())],initialX:100*Math.random(),initialY:100*Math.random(),animationDelay:5*Math.random(),animationDuration:8+6*Math.random()}));return e.jsx("div",{className:"fixed inset-0 pointer-events-none z-0",children:a.map(a=>e.jsx(t.div,{className:"absolute rounded-full opacity-40",style:{width:a.size+"px",height:a.size+"px",backgroundColor:a.color,left:a.initialX+"%",top:a.initialY+"%",filter:"blur(0.5px)",boxShadow:`0 0 ${2*a.size}px ${a.color}`},animate:{y:[0,-80,0],x:[0,25,-25,0],opacity:[.4,.7,.4],scale:[1,1.3,1]},transition:{duration:a.animationDuration,repeat:1/0,delay:a.animationDelay,ease:"easeInOut"}},a.id))})},[I,U]=r.useState(!1),z=[{id:"profile",label:"Profile",icon:b},{id:"artworks",label:"My Artworks",icon:p},{id:"events",label:"My Events",icon:v},{id:"likes",label:"Liked Posts",icon:x}],H=[{id:"settings",label:"Settings",icon:w},{id:"logout",label:"Logout",icon:y,isAction:!0}];if(E)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#F48C8C]/10 via-white to-[#134856]/10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-[#E05264] mx-auto mb-4"}),e.jsx("p",{className:"text-2xl font-dm-serif text-transparent bg-clip-text bg-gradient-to-r from-[#E05264] to-[#134856]",children:"Loading your dashboard..."})]})});const Y=e=>{"logout"===e?B():h(e),U(!1)};return e.jsxs("div",{className:"min-h-screen bg-blush-peach",children:[e.jsx(S,{}),e.jsx(N,{}),e.jsx("button",{onClick:()=>U(!I),className:"md:hidden fixed top-4 left-4 z-50 p-3 bg-white rounded-2xl shadow-lg text-[#134856] hover:text-[#E05264] transition-all duration-200",children:e.jsx(g,{className:"w-5 h-5"})}),I&&e.jsx("div",{className:"fixed inset-0 z-30 bg-gray-600 bg-opacity-50 md:hidden",onClick:()=>U(!1)}),e.jsx("div",{className:"px-10 mt-10 mx-auto pb-10",children:e.jsx("div",{className:"rounded-3xl shadow-lg border border-gray-100 overflow-hidden",children:e.jsxs("div",{className:"flex",children:[e.jsx("aside",{className:(I?"translate-x-0":"-translate-x-full")+" fixed inset-y-0 left-0 z-40 w-80 transform transition-transform duration-300 ease-in-out md:translate-x-0 md:static md:w-80 md:flex-shrink-0 bg-gradient-to-b from-[#134856] to-[#E05264]",children:e.jsxs("div",{className:"h-full px-6 py-8 overflow-y-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-3xl font-bold font-dm-serif text-white",children:"Dashboard"}),e.jsx("p",{className:"text-white text-sm mt-1 font-lora",children:"Navigate your workspace"}),e.jsx("div",{className:"mt-4 h-px bg-white/20"}),e.jsxs("div",{className:"mt-4 flex items-center space-x-3",children:[e.jsx("img",{src:(null==u?void 0:u.avatar)||"/default-avatar.png",alt:null==d?void 0:d.name,className:"w-12 h-12 rounded-full border-2 border-white shadow-sm"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-white truncate font-dm-serif",children:null==d?void 0:d.name}),e.jsx("p",{className:"text-xs text-white/70 truncate font-lora",children:"Artist Account"})]})]}),e.jsx("div",{className:"mt-4 h-px bg-white/20"})]}),e.jsxs("nav",{className:"space-y-2",children:[z.map(t=>{const a=t.icon,r=m===t.id;return e.jsxs("button",{onClick:()=>Y(t.id),className:"w-full flex items-center px-4 py-3 text-left rounded-2xl transition-all duration-200 font-lora "+(r?"bg-gradient-to-r from-[#E05264] to-[#E05264]/90 text-white shadow-md transform scale-[1.02]":"text-white hover:bg-white/10 hover:shadow-sm"),children:[e.jsx(a,{className:"w-5 h-5 mr-3"}),e.jsx("span",{className:"font-medium",children:t.label})]},t.id)}),e.jsx("div",{className:"mt-6 mb-4 h-px bg-white/20"}),H.map(t=>{const a=t.icon,r=m===t.id,l="logout"===t.id;return e.jsxs("button",{onClick:()=>Y(t.id),className:"w-full flex items-center px-4 py-3 text-left rounded-2xl transition-all duration-200 font-lora "+(l?"text-white hover:bg-red-500/20 hover:text-red-200":r?"bg-gradient-to-r from-[#E05264] to-[#E05264]/90 text-white shadow-md transform scale-[1.02]":"text-white hover:bg-white/10 hover:shadow-sm"),children:[e.jsx(a,{className:"w-5 h-5 mr-3"}),e.jsx("span",{className:"font-medium",children:t.label})]},t.id)})]})]})}),e.jsx("div",{className:"hidden md:block w-px bg-gray-200"}),e.jsx("main",{className:"flex-1 flex flex-col min-w-0 bg-white",children:e.jsx(a,{mode:"wait",children:e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"flex-1 flex flex-col min-h-0",children:[e.jsxs("div",{className:"bg-gradient-to-r from-[#134856] to-[#E05264] px-8 py-6 border-b border-gray-100",children:[e.jsx("h2",{className:"text-4xl font-bold text-white capitalize font-dm-serif",children:null==(s=[...z,...H].find(e=>e.id===m&&!e.isAction))?void 0:s.label}),e.jsxs("p",{className:"text-white text-2xl text-sm mt-1 font-lora",children:["profile"===m&&"Manage your artist profile and personal information","artworks"===m&&"View and manage your uploaded artworks","events"===m&&"Track your event participation and history","likes"===m&&"Browse artworks you've liked and saved","settings"===m&&"Configure your account preferences and settings"]})]}),e.jsxs("div",{className:"flex-1 p-8",children:["profile"===m&&e.jsx(A,{profile:u,stats:k,onProfileUpdate:M}),"artworks"===m&&e.jsx(D,{userId:null==d?void 0:d.id}),"events"===m&&e.jsx(L,{userId:null==d?void 0:d.id}),"likes"===m&&e.jsx(P,{userId:null==d?void 0:d.id}),"settings"===m&&e.jsx(F,{user:d,onLogout:B})]})]},m)})})]})})})]})}export{j as default};
